{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/forms/fieldSchemasToFormState/renderField.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/forms/fieldSchemasToFormState/renderField.tsx"],"sourcesContent":["import type {\n  ClientComponentProps,\n  ClientField,\n  FieldPaths,\n  FlattenedBlock,\n  ServerComponentProps,\n} from 'payload'\n\nimport { getTranslation } from '@payloadcms/translations'\nimport { createClientField, MissingEditorProp } from 'payload'\nimport { fieldIsHiddenOrDisabled } from 'payload/shared'\n\nimport type { RenderFieldMethod } from './types.js'\n\nimport { RenderServerComponent } from '../../elements/RenderServerComponent/index.js'\n\n// eslint-disable-next-line payload/no-imports-from-exports-dir -- MUST reference the exports dir: https://github.com/payloadcms/payload/issues/12002#issuecomment-2791493587\nimport { FieldDescription, WatchCondition } from '../../exports/client/index.js'\n\nconst defaultUIFieldComponentKeys: Array<'Cell' | 'Description' | 'Field' | 'Filter'> = [\n  'Cell',\n  'Description',\n  'Field',\n  'Filter',\n]\n\nexport const renderField: RenderFieldMethod = ({\n  id,\n  clientFieldSchemaMap,\n  collectionSlug,\n  data,\n  fieldConfig,\n  fieldSchemaMap,\n  fieldState,\n  forceCreateClientField,\n  formState,\n  indexPath,\n  lastRenderedPath,\n  mockRSCs,\n  operation,\n  parentPath,\n  parentSchemaPath,\n  path,\n  permissions,\n  preferences,\n  readOnly: readOnlyFromProps,\n  renderAllFields,\n  req,\n  schemaPath,\n  siblingData,\n}) => {\n  const requiresRender = renderAllFields || !lastRenderedPath || lastRenderedPath !== path\n\n  if (!requiresRender && fieldConfig.type !== 'array' && fieldConfig.type !== 'blocks') {\n    return\n  }\n\n  const clientField =\n    clientFieldSchemaMap && !forceCreateClientField\n      ? (clientFieldSchemaMap.get(schemaPath) as ClientField)\n      : createClientField({\n          defaultIDType: req.payload.config.db.defaultIDType,\n          field: fieldConfig,\n          i18n: req.i18n,\n          importMap: req.payload.importMap,\n        })\n\n  const clientProps: ClientComponentProps & Partial<FieldPaths> = {\n    field: clientField,\n    path,\n    permissions,\n    readOnly:\n      readOnlyFromProps === true\n        ? true\n        : typeof permissions === 'boolean'\n          ? !permissions\n          : !permissions?.[operation],\n    schemaPath,\n  }\n\n  if (fieldState?.customComponents) {\n    clientProps.customComponents = fieldState.customComponents\n  }\n\n  // fields with subfields\n  if (['array', 'blocks', 'collapsible', 'group', 'row', 'tabs'].includes(fieldConfig.type)) {\n    clientProps.indexPath = indexPath\n    clientProps.parentPath = parentPath\n    clientProps.parentSchemaPath = parentSchemaPath\n  }\n\n  const serverProps: ServerComponentProps = {\n    id,\n    clientField,\n    clientFieldSchemaMap,\n    data,\n    field: fieldConfig,\n    fieldSchemaMap,\n    permissions,\n    // TODO: Should we pass explicit values? initialValue, value, valid\n    // value and initialValue should be typed\n    collectionSlug,\n    formState,\n    i18n: req.i18n,\n    operation,\n    payload: req.payload,\n    preferences,\n    req,\n    siblingData,\n    user: req.user,\n    value: 'name' in fieldConfig && data?.[fieldConfig.name],\n  }\n\n  switch (fieldConfig.type) {\n    case 'array': {\n      fieldState?.rows?.forEach((row, rowIndex) => {\n        const rowLastRenderedPath = row.lastRenderedPath\n\n        const rowPath = `${path}.${rowIndex}`\n\n        const rowRequiresRender =\n          renderAllFields || !rowLastRenderedPath || rowLastRenderedPath !== rowPath\n\n        if (!rowRequiresRender) {\n          return\n        }\n\n        row.lastRenderedPath = rowPath\n\n        if (fieldConfig.admin?.components && 'RowLabel' in fieldConfig.admin.components) {\n          if (!row.customComponents) {\n            row.customComponents = {}\n          }\n\n          row.customComponents.RowLabel = !mockRSCs\n            ? RenderServerComponent({\n                clientProps,\n                Component: fieldConfig.admin.components.RowLabel,\n                importMap: req.payload.importMap,\n                key: `${rowIndex}`,\n                serverProps: {\n                  ...serverProps,\n                  rowLabel: `${getTranslation(fieldConfig.labels.singular, req.i18n)} ${String(\n                    rowIndex + 1,\n                  ).padStart(2, '0')}`,\n                  rowNumber: rowIndex + 1,\n                },\n              })\n            : 'Mock'\n        }\n      })\n\n      break\n    }\n\n    case 'blocks': {\n      fieldState?.rows?.forEach((row, rowIndex) => {\n        const rowLastRenderedPath = row.lastRenderedPath\n\n        const rowPath = `${path}.${rowIndex}`\n\n        const rowRequiresRender =\n          renderAllFields || !rowLastRenderedPath || rowLastRenderedPath !== rowPath\n\n        if (!rowRequiresRender) {\n          return\n        }\n\n        row.lastRenderedPath = rowPath\n\n        const blockTypeToMatch: string = row.blockType\n\n        const blockConfig =\n          req.payload.blocks[blockTypeToMatch] ??\n          ((fieldConfig.blockReferences ?? fieldConfig.blocks).find(\n            (block) => typeof block !== 'string' && block.slug === blockTypeToMatch,\n          ) as FlattenedBlock | undefined)\n\n        if (blockConfig.admin?.components && 'Label' in blockConfig.admin.components) {\n          if (!fieldState.rows[rowIndex]?.customComponents) {\n            fieldState.rows[rowIndex].customComponents = {}\n          }\n\n          fieldState.rows[rowIndex].customComponents.RowLabel = !mockRSCs\n            ? RenderServerComponent({\n                clientProps,\n                Component: blockConfig.admin.components.Label,\n                importMap: req.payload.importMap,\n                key: `${rowIndex}`,\n                serverProps: {\n                  ...serverProps,\n                  blockType: row.blockType,\n                  rowLabel: `${getTranslation(blockConfig.labels.singular, req.i18n)} ${String(\n                    rowIndex + 1,\n                  ).padStart(2, '0')}`,\n                  rowNumber: rowIndex + 1,\n                },\n              })\n            : 'Mock'\n        }\n      })\n\n      break\n    }\n  }\n\n  if (!requiresRender) {\n    return\n  }\n\n  /**\n   * Set the `lastRenderedPath` equal to the new path of the field, this will prevent it from being rendered again\n   */\n  fieldState.lastRenderedPath = path\n\n  if (fieldIsHiddenOrDisabled(clientField)) {\n    return\n  }\n\n  /**\n   * Only create the `customComponents` object if needed.\n   * This will prevent unnecessary data from being transferred to the client.\n   */\n  if (fieldConfig.admin) {\n    if (\n      (Object.keys(fieldConfig.admin.components || {}).length > 0 ||\n        fieldConfig.type === 'richText' ||\n        ('description' in fieldConfig.admin &&\n          typeof fieldConfig.admin.description === 'function')) &&\n      !fieldState?.customComponents\n    ) {\n      fieldState.customComponents = {}\n    }\n  }\n\n  switch (fieldConfig.type) {\n    case 'richText': {\n      if (!fieldConfig?.editor) {\n        throw new MissingEditorProp(fieldConfig) // while we allow disabling editor functionality, you should not have any richText fields defined if you do not have an editor\n      }\n\n      if (typeof fieldConfig?.editor === 'function') {\n        throw new Error('Attempted to access unsanitized rich text editor.')\n      }\n\n      if (!fieldConfig.admin) {\n        fieldConfig.admin = {}\n      }\n\n      if (!fieldConfig.admin.components) {\n        fieldConfig.admin.components = {}\n      }\n\n      fieldState.customComponents.Field = !mockRSCs ? (\n        <WatchCondition path={path}>\n          {RenderServerComponent({\n            clientProps,\n            Component: fieldConfig.editor.FieldComponent,\n            importMap: req.payload.importMap,\n            serverProps: {\n              ...serverProps,\n              // Manually inject lexical-specific `sanitizedEditorConfig` server prop, in order to reduce the size of the field schema.\n              // Otherwise, the editorConfig would be included twice - once on the top-level, and once as part of the `FieldComponent` server props.\n              sanitizedEditorConfig:\n                'editorConfig' in fieldConfig.editor ? fieldConfig.editor.editorConfig : undefined,\n            },\n          })}\n        </WatchCondition>\n      ) : (\n        'Mock'\n      )\n\n      break\n    }\n\n    case 'ui': {\n      if (fieldConfig?.admin?.components) {\n        // Render any extra, untyped components\n        for (const key in fieldConfig.admin.components) {\n          if (key in defaultUIFieldComponentKeys) {\n            continue\n          }\n\n          const Component = fieldConfig.admin.components[key]\n\n          fieldState.customComponents[key] = !mockRSCs\n            ? RenderServerComponent({\n                clientProps,\n                Component,\n                importMap: req.payload.importMap,\n                key: `field.admin.components.${key}`,\n                serverProps,\n              })\n            : 'Mock'\n        }\n      }\n      break\n    }\n\n    default: {\n      break\n    }\n  }\n\n  if (fieldConfig.admin) {\n    if (\n      'description' in fieldConfig.admin &&\n      typeof fieldConfig.admin?.description === 'function'\n    ) {\n      fieldState.customComponents.Description = !mockRSCs ? (\n        <FieldDescription\n          description={fieldConfig.admin?.description({\n            i18n: req.i18n,\n            t: req.i18n.t,\n          })}\n          path={path}\n        />\n      ) : (\n        'Mock'\n      )\n    }\n\n    if (fieldConfig.admin?.components) {\n      if ('afterInput' in fieldConfig.admin.components) {\n        fieldState.customComponents.AfterInput = !mockRSCs\n          ? RenderServerComponent({\n              clientProps,\n              Component: fieldConfig.admin.components.afterInput,\n              importMap: req.payload.importMap,\n              key: 'field.admin.components.afterInput',\n              serverProps,\n            })\n          : 'Mock'\n      }\n\n      if ('beforeInput' in fieldConfig.admin.components) {\n        fieldState.customComponents.BeforeInput = !mockRSCs\n          ? RenderServerComponent({\n              clientProps,\n              Component: fieldConfig.admin.components.beforeInput,\n              importMap: req.payload.importMap,\n              key: 'field.admin.components.beforeInput',\n              serverProps,\n            })\n          : 'Mock'\n      }\n\n      if ('Description' in fieldConfig.admin.components) {\n        fieldState.customComponents.Description = !mockRSCs\n          ? RenderServerComponent({\n              clientProps,\n              Component: fieldConfig.admin.components.Description,\n              importMap: req.payload.importMap,\n              key: 'field.admin.components.Description',\n              serverProps,\n            })\n          : 'Mock'\n      }\n\n      if ('Error' in fieldConfig.admin.components) {\n        fieldState.customComponents.Error = !mockRSCs\n          ? RenderServerComponent({\n              clientProps,\n              Component: fieldConfig.admin.components.Error,\n              importMap: req.payload.importMap,\n              key: 'field.admin.components.Error',\n              serverProps,\n            })\n          : 'Mock'\n      }\n\n      if ('Label' in fieldConfig.admin.components) {\n        fieldState.customComponents.Label = !mockRSCs\n          ? RenderServerComponent({\n              clientProps,\n              Component: fieldConfig.admin.components.Label,\n              importMap: req.payload.importMap,\n              key: 'field.admin.components.Label',\n              serverProps,\n            })\n          : 'Mock'\n      }\n\n      if ('Field' in fieldConfig.admin.components) {\n        fieldState.customComponents.Field = !mockRSCs ? (\n          <WatchCondition path={path}>\n            {RenderServerComponent({\n              clientProps,\n              Component: fieldConfig.admin.components.Field,\n              importMap: req.payload.importMap,\n              key: 'field.admin.components.Field',\n              serverProps,\n            })}\n          </WatchCondition>\n        ) : (\n          'Mock'\n        )\n      }\n    }\n  }\n}\n"],"names":["getTranslation","createClientField","MissingEditorProp","fieldIsHiddenOrDisabled","RenderServerComponent","FieldDescription","WatchCondition","defaultUIFieldComponentKeys","renderField","id","clientFieldSchemaMap","collectionSlug","data","fieldConfig","fieldSchemaMap","fieldState","forceCreateClientField","formState","indexPath","lastRenderedPath","mockRSCs","operation","parentPath","parentSchemaPath","path","permissions","preferences","readOnly","readOnlyFromProps","renderAllFields","req","schemaPath","siblingData","requiresRender","type","clientField","get","defaultIDType","payload","config","db","field","i18n","importMap","clientProps","customComponents","includes","serverProps","user","value","name","rows","forEach","row","rowIndex","rowLastRenderedPath","rowPath","rowRequiresRender","admin","components","RowLabel","Component","key","rowLabel","labels","singular","String","padStart","rowNumber","blockTypeToMatch","blockType","blockConfig","blocks","blockReferences","find","block","slug","Label","Object","keys","length","description","editor","Error","Field","_jsx","FieldComponent","sanitizedEditorConfig","editorConfig","undefined","Description","t","AfterInput","afterInput","BeforeInput","beforeInput"],"mappings":";;;;;AAQA,SAASA,cAAc,QAAQ;AAC/B,SAASC,iBAAiB,EAAEC,iBAAiB,QAAQ;AACrD,SAASC,uBAAuB,QAAQ;AAIxC,SAASC,qBAAqB,QAAQ;AAEtC,6KAAA;AACA,SAASC,gBAAgB,EAAEC,cAAc,QAAQ;;;;;;;;;;;;;AAEjD,MAAMC,2BAAA,GAAkF;IACtF;IACA;IACA;IACA;CACD;AAEM,MAAMC,WAAA,GAAiCA,CAAC,EAC7CC,EAAE,EACFC,oBAAoB,EACpBC,cAAc,EACdC,IAAI,EACJC,WAAW,EACXC,cAAc,EACdC,UAAU,EACVC,sBAAsB,EACtBC,SAAS,EACTC,SAAS,EACTC,gBAAgB,EAChBC,QAAQ,EACRC,SAAS,EACTC,UAAU,EACVC,gBAAgB,EAChBC,IAAI,EACJC,WAAW,EACXC,WAAW,EACXC,QAAA,EAAUC,iBAAiB,EAC3BC,eAAe,EACfC,GAAG,EACHC,UAAU,EACVC,WAAAA,EACD;IACC,MAAMC,cAAA,GAAiBJ,eAAA,IAAmB,CAACV,gBAAA,IAAoBA,gBAAA,KAAqBK,IAAA;IAEpF,IAAI,CAACS,cAAA,IAAkBpB,WAAA,CAAYqB,IAAI,KAAK,WAAWrB,WAAA,CAAYqB,IAAI,KAAK,UAAU;QACpF;IACF;IAEA,MAAMC,WAAA,GACJzB,oBAAA,IAAwB,CAACM,sBAAA,GACpBN,oBAAA,CAAqB0B,GAAG,CAACL,UAAA,QAC1B9B,mIAAA,EAAkB;QAChBoC,aAAA,EAAeP,GAAA,CAAIQ,OAAO,CAACC,MAAM,CAACC,EAAE,CAACH,aAAa;QAClDI,KAAA,EAAO5B,WAAA;QACP6B,IAAA,EAAMZ,GAAA,CAAIY,IAAI;QACdC,SAAA,EAAWb,GAAA,CAAIQ,OAAO,CAACK,SAAAA;IACzB;IAEN,MAAMC,WAAA,GAA0D;QAC9DH,KAAA,EAAON,WAAA;QACPX,IAAA;QACAC,WAAA;QACAE,QAAA,EACEC,iBAAA,KAAsB,OAClB,OACA,OAAOH,WAAA,KAAgB,YACrB,CAACA,WAAA,GACD,CAACA,WAAA,EAAA,CAAcJ,SAAA,CAAU;QACjCU;IACF;IAEA,IAAIhB,UAAA,EAAY8B,gBAAA,EAAkB;QAChCD,WAAA,CAAYC,gBAAgB,GAAG9B,UAAA,CAAW8B,gBAAgB;IAC5D;IAEA,wBAAA;IACA,IAAI;QAAC;QAAS;QAAU;QAAe;QAAS;QAAO;KAAO,CAACC,QAAQ,CAACjC,WAAA,CAAYqB,IAAI,GAAG;QACzFU,WAAA,CAAY1B,SAAS,GAAGA,SAAA;QACxB0B,WAAA,CAAYtB,UAAU,GAAGA,UAAA;QACzBsB,WAAA,CAAYrB,gBAAgB,GAAGA,gBAAA;IACjC;IAEA,MAAMwB,WAAA,GAAoC;QACxCtC,EAAA;QACA0B,WAAA;QACAzB,oBAAA;QACAE,IAAA;QACA6B,KAAA,EAAO5B,WAAA;QACPC,cAAA;QACAW,WAAA;QACA,mEAAA;QACA,yCAAA;QACAd,cAAA;QACAM,SAAA;QACAyB,IAAA,EAAMZ,GAAA,CAAIY,IAAI;QACdrB,SAAA;QACAiB,OAAA,EAASR,GAAA,CAAIQ,OAAO;QACpBZ,WAAA;QACAI,GAAA;QACAE,WAAA;QACAgB,IAAA,EAAMlB,GAAA,CAAIkB,IAAI;QACdC,KAAA,EAAO,UAAUpC,WAAA,IAAeD,IAAA,EAAA,CAAOC,WAAA,CAAYqC,IAAI,CAAA;IACzD;IAEA,OAAQrC,WAAA,CAAYqB,IAAI;QACtB,KAAK;YAAS;gBACZnB,UAAA,EAAYoC,IAAA,EAAMC,OAAA,CAAQ,CAACC,GAAA,EAAKC,QAAA;oBAC9B,MAAMC,mBAAA,GAAsBF,GAAA,CAAIlC,gBAAgB;oBAEhD,MAAMqC,OAAA,GAAU,GAAGhC,IAAA,CAAA,CAAA,EAAQ8B,QAAA,EAAU;oBAErC,MAAMG,iBAAA,GACJ5B,eAAA,IAAmB,CAAC0B,mBAAA,IAAuBA,mBAAA,KAAwBC,OAAA;oBAErE,IAAI,CAACC,iBAAA,EAAmB;wBACtB;oBACF;oBAEAJ,GAAA,CAAIlC,gBAAgB,GAAGqC,OAAA;oBAEvB,IAAI3C,WAAA,CAAY6C,KAAK,EAAEC,UAAA,IAAc,cAAc9C,WAAA,CAAY6C,KAAK,CAACC,UAAU,EAAE;wBAC/E,IAAI,CAACN,GAAA,CAAIR,gBAAgB,EAAE;4BACzBQ,GAAA,CAAIR,gBAAgB,GAAG,CAAC;wBAC1B;wBAEAQ,GAAA,CAAIR,gBAAgB,CAACe,QAAQ,GAAG,CAACxC,QAAA,OAC7BhB,wNAAA,EAAsB;4BACpBwC,WAAA;4BACAiB,SAAA,EAAWhD,WAAA,CAAY6C,KAAK,CAACC,UAAU,CAACC,QAAQ;4BAChDjB,SAAA,EAAWb,GAAA,CAAIQ,OAAO,CAACK,SAAS;4BAChCmB,GAAA,EAAK,GAAGR,QAAA,EAAU;4BAClBP,WAAA,EAAa;gCACX,GAAGA,WAAW;gCACdgB,QAAA,EAAU,OAAG/D,4MAAA,EAAea,WAAA,CAAYmD,MAAM,CAACC,QAAQ,EAAEnC,GAAA,CAAIY,IAAI,EAAA,CAAA,EAAKwB,MAAA,CACpEZ,QAAA,GAAW,GACXa,QAAQ,CAAC,GAAG,MAAM;gCACpBC,SAAA,EAAWd,QAAA,GAAW;4BACxB;wBACF,KACA;oBACN;gBACF;gBAEA;YACF;QAEA,KAAK;YAAU;gBACbvC,UAAA,EAAYoC,IAAA,EAAMC,OAAA,CAAQ,CAACC,GAAA,EAAKC,QAAA;oBAC9B,MAAMC,mBAAA,GAAsBF,GAAA,CAAIlC,gBAAgB;oBAEhD,MAAMqC,OAAA,GAAU,GAAGhC,IAAA,CAAA,CAAA,EAAQ8B,QAAA,EAAU;oBAErC,MAAMG,iBAAA,GACJ5B,eAAA,IAAmB,CAAC0B,mBAAA,IAAuBA,mBAAA,KAAwBC,OAAA;oBAErE,IAAI,CAACC,iBAAA,EAAmB;wBACtB;oBACF;oBAEAJ,GAAA,CAAIlC,gBAAgB,GAAGqC,OAAA;oBAEvB,MAAMa,gBAAA,GAA2BhB,GAAA,CAAIiB,SAAS;oBAE9C,MAAMC,WAAA,GACJzC,GAAA,CAAIQ,OAAO,CAACkC,MAAM,CAACH,gBAAA,CAAiB,IACnC,CAACxD,WAAA,CAAY4D,eAAe,IAAI5D,WAAA,CAAY2D,MAAM,EAAEE,IAAI,EACtDC,KAAA,GAAU,OAAOA,KAAA,KAAU,YAAYA,KAAA,CAAMC,IAAI,KAAKP,gBAAA;oBAG3D,IAAIE,WAAA,CAAYb,KAAK,EAAEC,UAAA,IAAc,WAAWY,WAAA,CAAYb,KAAK,CAACC,UAAU,EAAE;wBAC5E,IAAI,CAAC5C,UAAA,CAAWoC,IAAI,CAACG,QAAA,CAAS,EAAET,gBAAA,EAAkB;4BAChD9B,UAAA,CAAWoC,IAAI,CAACG,QAAA,CAAS,CAACT,gBAAgB,GAAG,CAAC;wBAChD;wBAEA9B,UAAA,CAAWoC,IAAI,CAACG,QAAA,CAAS,CAACT,gBAAgB,CAACe,QAAQ,GAAG,CAACxC,QAAA,OACnDhB,wNAAA,EAAsB;4BACpBwC,WAAA;4BACAiB,SAAA,EAAWU,WAAA,CAAYb,KAAK,CAACC,UAAU,CAACkB,KAAK;4BAC7ClC,SAAA,EAAWb,GAAA,CAAIQ,OAAO,CAACK,SAAS;4BAChCmB,GAAA,EAAK,GAAGR,QAAA,EAAU;4BAClBP,WAAA,EAAa;gCACX,GAAGA,WAAW;gCACduB,SAAA,EAAWjB,GAAA,CAAIiB,SAAS;gCACxBP,QAAA,EAAU,OAAG/D,4MAAA,EAAeuE,WAAA,CAAYP,MAAM,CAACC,QAAQ,EAAEnC,GAAA,CAAIY,IAAI,EAAA,CAAA,EAAKwB,MAAA,CACpEZ,QAAA,GAAW,GACXa,QAAQ,CAAC,GAAG,MAAM;gCACpBC,SAAA,EAAWd,QAAA,GAAW;4BACxB;wBACF,KACA;oBACN;gBACF;gBAEA;YACF;IACF;IAEA,IAAI,CAACrB,cAAA,EAAgB;QACnB;IACF;IAEA;;KAGAlB,UAAA,CAAWI,gBAAgB,GAAGK,IAAA;IAE9B,QAAIrB,6JAAA,EAAwBgC,WAAA,GAAc;QACxC;IACF;IAEA;;;KAIA,IAAItB,WAAA,CAAY6C,KAAK,EAAE;QACrB,IACE,CAACoB,MAAA,CAAOC,IAAI,CAAClE,WAAA,CAAY6C,KAAK,CAACC,UAAU,IAAI,CAAC,GAAGqB,MAAM,GAAG,KACxDnE,WAAA,CAAYqB,IAAI,KAAK,cACpB,iBAAiBrB,WAAA,CAAY6C,KAAK,IACjC,OAAO7C,WAAA,CAAY6C,KAAK,CAACuB,WAAW,KAAK,UAAU,KACvD,CAAClE,UAAA,EAAY8B,gBAAA,EACb;YACA9B,UAAA,CAAW8B,gBAAgB,GAAG,CAAC;QACjC;IACF;IAEA,OAAQhC,WAAA,CAAYqB,IAAI;QACtB,KAAK;YAAY;gBACf,IAAI,CAACrB,WAAA,EAAaqE,MAAA,EAAQ;oBACxB,MAAM,IAAIhF,mIAAA,CAAkBW,WAAA,EAAa,8HAAA;;gBAC3C;gBAEA,IAAI,OAAOA,WAAA,EAAaqE,MAAA,KAAW,YAAY;oBAC7C,MAAM,IAAIC,KAAA,CAAM;gBAClB;gBAEA,IAAI,CAACtE,WAAA,CAAY6C,KAAK,EAAE;oBACtB7C,WAAA,CAAY6C,KAAK,GAAG,CAAC;gBACvB;gBAEA,IAAI,CAAC7C,WAAA,CAAY6C,KAAK,CAACC,UAAU,EAAE;oBACjC9C,WAAA,CAAY6C,KAAK,CAACC,UAAU,GAAG,CAAC;gBAClC;gBAEA5C,UAAA,CAAW8B,gBAAgB,CAACuC,KAAK,GAAG,CAAChE,QAAA,GAAA,WAAA,OACnCiE,qOAAA,EAAC/E,iMAAA,EAAA;oBAAekB,IAAA,EAAMA,IAAA;kCACnBpB,wNAAA,EAAsB;wBACrBwC,WAAA;wBACAiB,SAAA,EAAWhD,WAAA,CAAYqE,MAAM,CAACI,cAAc;wBAC5C3C,SAAA,EAAWb,GAAA,CAAIQ,OAAO,CAACK,SAAS;wBAChCI,WAAA,EAAa;4BACX,GAAGA,WAAW;4BACd,yHAAA;4BACA,sIAAA;4BACAwC,qBAAA,EACE,kBAAkB1E,WAAA,CAAYqE,MAAM,GAAGrE,WAAA,CAAYqE,MAAM,CAACM,YAAY,GAAGC;wBAC7E;oBACF;qBAGF;gBAGF;YACF;QAEA,KAAK;YAAM;gBACT,IAAI5E,WAAA,EAAa6C,KAAA,EAAOC,UAAA,EAAY;oBAClC,uCAAA;oBACA,IAAK,MAAMG,GAAA,IAAOjD,WAAA,CAAY6C,KAAK,CAACC,UAAU,CAAE;wBAC9C,IAAIG,GAAA,IAAOvD,2BAAA,EAA6B;4BACtC;wBACF;wBAEA,MAAMsD,SAAA,GAAYhD,WAAA,CAAY6C,KAAK,CAACC,UAAU,CAACG,GAAA,CAAI;wBAEnD/C,UAAA,CAAW8B,gBAAgB,CAACiB,GAAA,CAAI,GAAG,CAAC1C,QAAA,OAChChB,wNAAA,EAAsB;4BACpBwC,WAAA;4BACAiB,SAAA;4BACAlB,SAAA,EAAWb,GAAA,CAAIQ,OAAO,CAACK,SAAS;4BAChCmB,GAAA,EAAK,CAAA,uBAAA,EAA0BA,GAAA,EAAK;4BACpCf;wBACF,KACA;oBACN;gBACF;gBACA;YACF;QAEA;YAAS;gBACP;YACF;IACF;IAEA,IAAIlC,WAAA,CAAY6C,KAAK,EAAE;QACrB,IACE,iBAAiB7C,WAAA,CAAY6C,KAAK,IAClC,OAAO7C,WAAA,CAAY6C,KAAK,EAAEuB,WAAA,KAAgB,YAC1C;YACAlE,UAAA,CAAW8B,gBAAgB,CAAC6C,WAAW,GAAG,CAACtE,QAAA,GAAA,WAAA,OACzCiE,qOAAA,EAAChF,mMAAA,EAAA;gBACC4E,WAAA,EAAapE,WAAA,CAAY6C,KAAK,EAAEuB,WAAA,CAAY;oBAC1CvC,IAAA,EAAMZ,GAAA,CAAIY,IAAI;oBACdiD,CAAA,EAAG7D,GAAA,CAAIY,IAAI,CAACiD,CAAAA;gBACd;gBACAnE,IAAA,EAAMA;iBAGR;QAEJ;QAEA,IAAIX,WAAA,CAAY6C,KAAK,EAAEC,UAAA,EAAY;YACjC,IAAI,gBAAgB9C,WAAA,CAAY6C,KAAK,CAACC,UAAU,EAAE;gBAChD5C,UAAA,CAAW8B,gBAAgB,CAAC+C,UAAU,GAAG,CAACxE,QAAA,OACtChB,wNAAA,EAAsB;oBACpBwC,WAAA;oBACAiB,SAAA,EAAWhD,WAAA,CAAY6C,KAAK,CAACC,UAAU,CAACkC,UAAU;oBAClDlD,SAAA,EAAWb,GAAA,CAAIQ,OAAO,CAACK,SAAS;oBAChCmB,GAAA,EAAK;oBACLf;gBACF,KACA;YACN;YAEA,IAAI,iBAAiBlC,WAAA,CAAY6C,KAAK,CAACC,UAAU,EAAE;gBACjD5C,UAAA,CAAW8B,gBAAgB,CAACiD,WAAW,GAAG,CAAC1E,QAAA,OACvChB,wNAAA,EAAsB;oBACpBwC,WAAA;oBACAiB,SAAA,EAAWhD,WAAA,CAAY6C,KAAK,CAACC,UAAU,CAACoC,WAAW;oBACnDpD,SAAA,EAAWb,GAAA,CAAIQ,OAAO,CAACK,SAAS;oBAChCmB,GAAA,EAAK;oBACLf;gBACF,KACA;YACN;YAEA,IAAI,iBAAiBlC,WAAA,CAAY6C,KAAK,CAACC,UAAU,EAAE;gBACjD5C,UAAA,CAAW8B,gBAAgB,CAAC6C,WAAW,GAAG,CAACtE,QAAA,OACvChB,wNAAA,EAAsB;oBACpBwC,WAAA;oBACAiB,SAAA,EAAWhD,WAAA,CAAY6C,KAAK,CAACC,UAAU,CAAC+B,WAAW;oBACnD/C,SAAA,EAAWb,GAAA,CAAIQ,OAAO,CAACK,SAAS;oBAChCmB,GAAA,EAAK;oBACLf;gBACF,KACA;YACN;YAEA,IAAI,WAAWlC,WAAA,CAAY6C,KAAK,CAACC,UAAU,EAAE;gBAC3C5C,UAAA,CAAW8B,gBAAgB,CAACsC,KAAK,GAAG,CAAC/D,QAAA,OACjChB,wNAAA,EAAsB;oBACpBwC,WAAA;oBACAiB,SAAA,EAAWhD,WAAA,CAAY6C,KAAK,CAACC,UAAU,CAACwB,KAAK;oBAC7CxC,SAAA,EAAWb,GAAA,CAAIQ,OAAO,CAACK,SAAS;oBAChCmB,GAAA,EAAK;oBACLf;gBACF,KACA;YACN;YAEA,IAAI,WAAWlC,WAAA,CAAY6C,KAAK,CAACC,UAAU,EAAE;gBAC3C5C,UAAA,CAAW8B,gBAAgB,CAACgC,KAAK,GAAG,CAACzD,QAAA,OACjChB,wNAAA,EAAsB;oBACpBwC,WAAA;oBACAiB,SAAA,EAAWhD,WAAA,CAAY6C,KAAK,CAACC,UAAU,CAACkB,KAAK;oBAC7ClC,SAAA,EAAWb,GAAA,CAAIQ,OAAO,CAACK,SAAS;oBAChCmB,GAAA,EAAK;oBACLf;gBACF,KACA;YACN;YAEA,IAAI,WAAWlC,WAAA,CAAY6C,KAAK,CAACC,UAAU,EAAE;gBAC3C5C,UAAA,CAAW8B,gBAAgB,CAACuC,KAAK,GAAG,CAAChE,QAAA,GAAA,WAAA,OACnCiE,qOAAA,EAAC/E,iMAAA,EAAA;oBAAekB,IAAA,EAAMA,IAAA;kCACnBpB,wNAAA,EAAsB;wBACrBwC,WAAA;wBACAiB,SAAA,EAAWhD,WAAA,CAAY6C,KAAK,CAACC,UAAU,CAACyB,KAAK;wBAC7CzC,SAAA,EAAWb,GAAA,CAAIQ,OAAO,CAACK,SAAS;wBAChCmB,GAAA,EAAK;wBACLf;oBACF;qBAGF;YAEJ;QACF;IACF;AACF","ignoreList":[]}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/utilities/buildClientFieldSchemaMap/traverseFields.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/utilities/buildClientFieldSchemaMap/traverseFields.ts"],"sourcesContent":["import type { I18n } from '@payloadcms/translations'\n\nimport {\n  type ClientConfig,\n  type ClientField,\n  type ClientFieldSchemaMap,\n  createClientFields,\n  type Field,\n  type FieldSchemaMap,\n  type Payload,\n} from 'payload'\nimport { fieldAffectsData, getFieldPaths, tabHasName } from 'payload/shared'\n\ntype Args = {\n  clientSchemaMap: ClientFieldSchemaMap\n  config: ClientConfig\n  fields: ClientField[]\n  i18n: I18n<any, any>\n  parentIndexPath: string\n  parentSchemaPath: string\n  payload: Payload\n  schemaMap: FieldSchemaMap\n}\n\nexport const traverseFields = ({\n  clientSchemaMap,\n  config,\n  fields,\n  i18n,\n  parentIndexPath,\n  parentSchemaPath,\n  payload,\n  schemaMap,\n}: Args) => {\n  for (const [index, field] of fields.entries()) {\n    const { indexPath, schemaPath } = getFieldPaths({\n      field,\n      index,\n      parentIndexPath: 'name' in field ? '' : parentIndexPath,\n      parentPath: '',\n      parentSchemaPath,\n    })\n\n    clientSchemaMap.set(schemaPath, field)\n\n    switch (field.type) {\n      case 'array': {\n        traverseFields({\n          clientSchemaMap,\n          config,\n          fields: field.fields,\n          i18n,\n          parentIndexPath: '',\n          parentSchemaPath: schemaPath,\n          payload,\n          schemaMap,\n        })\n\n        break\n      }\n\n      case 'blocks':\n        ;(field.blockReferences ?? field.blocks).map((_block) => {\n          const block =\n            typeof _block === 'string'\n              ? config.blocksMap\n                ? config.blocksMap[_block]\n                : config.blocks.find((block) => typeof block !== 'string' && block.slug === _block)\n              : _block\n\n          const blockSchemaPath = `${schemaPath}.${block.slug}`\n\n          clientSchemaMap.set(blockSchemaPath, block)\n          traverseFields({\n            clientSchemaMap,\n            config,\n            fields: block.fields,\n            i18n,\n            parentIndexPath: '',\n            parentSchemaPath: blockSchemaPath,\n            payload,\n            schemaMap,\n          })\n        })\n\n        break\n\n      case 'collapsible':\n      case 'row':\n        traverseFields({\n          clientSchemaMap,\n          config,\n          fields: field.fields,\n          i18n,\n          parentIndexPath: indexPath,\n          parentSchemaPath,\n          payload,\n          schemaMap,\n        })\n        break\n\n      case 'group': {\n        if (fieldAffectsData(field)) {\n          traverseFields({\n            clientSchemaMap,\n            config,\n            fields: field.fields,\n            i18n,\n            parentIndexPath: '',\n            parentSchemaPath: schemaPath,\n            payload,\n            schemaMap,\n          })\n        } else {\n          traverseFields({\n            clientSchemaMap,\n            config,\n            fields: field.fields,\n            i18n,\n            parentIndexPath: indexPath,\n            parentSchemaPath,\n            payload,\n            schemaMap,\n          })\n        }\n        break\n      }\n\n      case 'richText': {\n        // richText sub-fields are not part of the ClientConfig or the Config.\n        // They only exist in the field schema map.\n        // Thus, we need to\n        // 1. get them from the field schema map\n        // 2. convert them to client fields\n        // 3. add them to the client schema map\n\n        // So these would basically be all fields that are not part of the client config already\n        const richTextFieldSchemaMap: FieldSchemaMap = new Map()\n        for (const [path, subField] of schemaMap.entries()) {\n          if (path.startsWith(`${schemaPath}.`)) {\n            richTextFieldSchemaMap.set(path, subField)\n          }\n        }\n\n        // Now loop through them, convert each entry to a client field and add it to the client schema map\n        for (const [path, subField] of richTextFieldSchemaMap.entries()) {\n          // check if fields is the only key in the subField object\n          const isFieldsOnly = Object.keys(subField).length === 1 && 'fields' in subField\n\n          const clientFields = createClientFields({\n            defaultIDType: payload.config.db.defaultIDType,\n            disableAddingID: true,\n            fields: isFieldsOnly ? subField.fields : [subField as Field],\n            i18n,\n            importMap: payload.importMap,\n          })\n\n          clientSchemaMap.set(\n            path,\n            isFieldsOnly\n              ? {\n                  fields: clientFields,\n                }\n              : clientFields[0],\n          )\n        }\n        break\n      }\n\n      case 'tabs':\n        field.tabs.map((tab, tabIndex) => {\n          const isNamedTab = tabHasName(tab)\n\n          const { indexPath: tabIndexPath, schemaPath: tabSchemaPath } = getFieldPaths({\n            field: {\n              ...tab,\n              type: 'tab',\n            },\n            index: tabIndex,\n            parentIndexPath: indexPath,\n            parentPath: '',\n            parentSchemaPath,\n          })\n\n          clientSchemaMap.set(tabSchemaPath, tab)\n\n          traverseFields({\n            clientSchemaMap,\n            config,\n            fields: tab.fields,\n            i18n,\n            parentIndexPath: isNamedTab ? '' : tabIndexPath,\n            parentSchemaPath: isNamedTab ? tabSchemaPath : parentSchemaPath,\n            payload,\n            schemaMap,\n          })\n        })\n\n        break\n    }\n  }\n}\n"],"names":["createClientFields","fieldAffectsData","getFieldPaths","tabHasName","traverseFields","clientSchemaMap","config","fields","i18n","parentIndexPath","parentSchemaPath","payload","schemaMap","index","field","entries","indexPath","schemaPath","parentPath","set","type","blockReferences","blocks","map","_block","block","blocksMap","find","slug","blockSchemaPath","richTextFieldSchemaMap","Map","path","subField","startsWith","isFieldsOnly","Object","keys","length","clientFields","defaultIDType","db","disableAddingID","importMap","tabs","tab","tabIndex","isNamedTab","tabIndexPath","tabSchemaPath"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 471, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/utilities/buildClientFieldSchemaMap/index.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/utilities/buildClientFieldSchemaMap/index.ts"],"sourcesContent":["import type { I18n } from '@payloadcms/translations'\nimport type {\n  ClientConfig,\n  ClientField,\n  ClientFieldSchemaMap,\n  FieldSchemaMap,\n  Payload,\n  TextFieldClient,\n} from 'payload'\n\nimport { traverseFields } from './traverseFields.js'\n\nconst baseAuthFields: ClientField[] = [\n  {\n    name: 'password',\n    type: 'text',\n    required: true,\n  },\n  {\n    name: 'confirm-password',\n    type: 'text',\n    required: true,\n  },\n]\n\n/**\n * Flattens the config fields into a map of field schemas\n */\nexport const buildClientFieldSchemaMap = (args: {\n  collectionSlug?: string\n  config: ClientConfig\n  globalSlug?: string\n  i18n: I18n\n  payload: Payload\n  schemaMap: FieldSchemaMap\n}): { clientFieldSchemaMap: ClientFieldSchemaMap } => {\n  const { collectionSlug, config, globalSlug, i18n, payload, schemaMap } = args\n\n  const clientSchemaMap: ClientFieldSchemaMap = new Map()\n\n  if (collectionSlug) {\n    const matchedCollection = config.collections.find(\n      (collection) => collection.slug === collectionSlug,\n    )\n\n    if (matchedCollection) {\n      let fieldsToSet = matchedCollection?.fields || []\n\n      if (matchedCollection.auth && !matchedCollection.auth.disableLocalStrategy) {\n        ;(baseAuthFields[0] as TextFieldClient).label = i18n.t('general:password')\n        ;(baseAuthFields[1] as TextFieldClient).label = i18n.t('authentication:confirmPassword')\n        // Place these fields _last_ to ensure they do not disrupt field paths in the field schema map\n        fieldsToSet = fieldsToSet.concat(baseAuthFields)\n      }\n\n      clientSchemaMap.set(collectionSlug, {\n        fields: fieldsToSet,\n      })\n\n      traverseFields({\n        clientSchemaMap,\n        config,\n        fields: fieldsToSet,\n        i18n,\n        parentIndexPath: '',\n        parentSchemaPath: collectionSlug,\n        payload,\n        schemaMap,\n      })\n    }\n  } else if (globalSlug) {\n    const matchedGlobal = config.globals.find((global) => global.slug === globalSlug)\n\n    if (matchedGlobal) {\n      clientSchemaMap.set(globalSlug, {\n        fields: matchedGlobal.fields,\n      })\n\n      traverseFields({\n        clientSchemaMap,\n        config,\n        fields: matchedGlobal.fields,\n        i18n,\n        parentIndexPath: '',\n        parentSchemaPath: globalSlug,\n        payload,\n        schemaMap,\n      })\n    }\n  }\n\n  return { clientFieldSchemaMap: clientSchemaMap }\n}\n"],"names":["traverseFields","baseAuthFields","name","type","required","buildClientFieldSchemaMap","args","collectionSlug","config","globalSlug","i18n","payload","schemaMap","clientSchemaMap","Map","matchedCollection","collections","find","collection","slug","fieldsToSet","fields","auth","disableLocalStrategy","label","t","concat","set","parentIndexPath","parentSchemaPath","matchedGlobal","globals","global","clientFieldSchemaMap"],"mappings":";;;;AAUA,SAASA,cAAc,QAAQ;;;;;;AAE/B,MAAMC,cAAA,GAAgC;IACpC;QACEC,IAAA,EAAM;QACNC,IAAA,EAAM;QACNC,QAAA,EAAU;IACZ;IACA;QACEF,IAAA,EAAM;QACNC,IAAA,EAAM;QACNC,QAAA,EAAU;IACZ;CACD;AAKM,MAAMC,yBAAA,IAA6BC,IAAA;IAQxC,MAAM,EAAEC,cAAc,EAAEC,MAAM,EAAEC,UAAU,EAAEC,IAAI,EAAEC,OAAO,EAAEC,SAAAA,EAAW,GAAGN,IAAA;IAEzE,MAAMO,eAAA,GAAwC,IAAIC,GAAA;IAElD,IAAIP,cAAA,EAAgB;QAClB,MAAMQ,iBAAA,GAAoBP,MAAA,CAAOQ,WAAW,CAACC,IAAI,EAC9CC,UAAA,GAAeA,UAAA,CAAWC,IAAI,KAAKZ,cAAA;QAGtC,IAAIQ,iBAAA,EAAmB;YACrB,IAAIK,WAAA,GAAcL,iBAAA,EAAmBM,MAAA,IAAU,EAAE;YAEjD,IAAIN,iBAAA,CAAkBO,IAAI,IAAI,CAACP,iBAAA,CAAkBO,IAAI,CAACC,oBAAoB,EAAE;;gBACxEtB,cAAc,CAAC,EAAE,CAAqBuB,KAAK,GAAGd,IAAA,CAAKe,CAAC,CAAC;gBACrDxB,cAAc,CAAC,EAAE,CAAqBuB,KAAK,GAAGd,IAAA,CAAKe,CAAC,CAAC;gBACvD,8FAAA;gBACAL,WAAA,GAAcA,WAAA,CAAYM,MAAM,CAACzB,cAAA;YACnC;YAEAY,eAAA,CAAgBc,GAAG,CAACpB,cAAA,EAAgB;gBAClCc,MAAA,EAAQD;YACV;gBAEApB,+NAAA,EAAe;gBACba,eAAA;gBACAL,MAAA;gBACAa,MAAA,EAAQD,WAAA;gBACRV,IAAA;gBACAkB,eAAA,EAAiB;gBACjBC,gBAAA,EAAkBtB,cAAA;gBAClBI,OAAA;gBACAC;YACF;QACF;IACF,OAAO,IAAIH,UAAA,EAAY;QACrB,MAAMqB,aAAA,GAAgBtB,MAAA,CAAOuB,OAAO,CAACd,IAAI,EAAEe,MAAA,GAAWA,MAAA,CAAOb,IAAI,KAAKV,UAAA;QAEtE,IAAIqB,aAAA,EAAe;YACjBjB,eAAA,CAAgBc,GAAG,CAAClB,UAAA,EAAY;gBAC9BY,MAAA,EAAQS,aAAA,CAAcT,MAAAA;YACxB;gBAEArB,+NAAA,EAAe;gBACba,eAAA;gBACAL,MAAA;gBACAa,MAAA,EAAQS,aAAA,CAAcT,MAAM;gBAC5BX,IAAA;gBACAkB,eAAA,EAAiB;gBACjBC,gBAAA,EAAkBpB,UAAA;gBAClBE,OAAA;gBACAC;YACF;QACF;IACF;IAEA,OAAO;QAAEqB,oBAAA,EAAsBpB;IAAgB;AACjD","ignoreList":[]}},
    {"offset": {"line": 550, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/utilities/getClientSchemaMap.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/utilities/getClientSchemaMap.ts"],"sourcesContent":["import type { I18n, I18nClient } from '@payloadcms/translations'\nimport type { ClientConfig, ClientFieldSchemaMap, FieldSchemaMap, Payload } from 'payload'\n\nimport { cache } from 'react'\n\nimport { buildClientFieldSchemaMap } from './buildClientFieldSchemaMap/index.js'\n\nlet cachedClientSchemaMap = global._payload_clientSchemaMap\n\nif (!cachedClientSchemaMap) {\n  cachedClientSchemaMap = global._payload_clientSchemaMap = null\n}\n\nexport const getClientSchemaMap = cache(\n  (args: {\n    collectionSlug?: string\n    config: ClientConfig\n    globalSlug?: string\n    i18n: I18nClient\n    payload: Payload\n    schemaMap: FieldSchemaMap\n  }): ClientFieldSchemaMap => {\n    const { collectionSlug, config, globalSlug, i18n, payload, schemaMap } = args\n\n    if (!cachedClientSchemaMap || global._payload_doNotCacheClientSchemaMap) {\n      cachedClientSchemaMap = new Map()\n    }\n\n    let cachedEntityClientFieldMap = cachedClientSchemaMap.get(collectionSlug || globalSlug)\n\n    if (cachedEntityClientFieldMap) {\n      return cachedEntityClientFieldMap\n    }\n\n    cachedEntityClientFieldMap = new Map()\n\n    const { clientFieldSchemaMap: entityClientFieldMap } = buildClientFieldSchemaMap({\n      collectionSlug,\n      config,\n      globalSlug,\n      i18n: i18n as I18n,\n      payload,\n      schemaMap,\n    })\n\n    cachedClientSchemaMap.set(collectionSlug || globalSlug, entityClientFieldMap)\n\n    global._payload_clientSchemaMap = cachedClientSchemaMap\n\n    global._payload_doNotCacheClientSchemaMap = false\n\n    return entityClientFieldMap\n  },\n)\n"],"names":["cache","buildClientFieldSchemaMap","cachedClientSchemaMap","global","_payload_clientSchemaMap","getClientSchemaMap","args","collectionSlug","config","globalSlug","i18n","payload","schemaMap","_payload_doNotCacheClientSchemaMap","Map","cachedEntityClientFieldMap","get","clientFieldSchemaMap","entityClientFieldMap","set"],"mappings":";;;;AAGA,SAASA,KAAK,QAAQ;AAEtB,SAASC,yBAAyB,QAAQ;;;;;;;AAE1C,IAAIC,qBAAA,GAAwBC,MAAA,mDAAOC,wBAAwB;AAE3D,IAAI,CAACF,qBAAA,EAAuB;IAC1BA,qBAAA,GAAwBC,MAAA,mDAAOC,wBAAwB,GAAG;AAC5D;AAEO,MAAMC,kBAAA,OAAqBL,qNAAA,GAC/BM,IAAA;IAQC,MAAM,EAAEC,cAAc,EAAEC,MAAM,EAAEC,UAAU,EAAEC,IAAI,EAAEC,OAAO,EAAEC,SAAAA,EAAW,GAAGN,IAAA;IAEzE,IAAI,CAACJ,qBAAA,IAAyBC,MAAA,mDAAOU,kCAAkC,EAAE;QACvEX,qBAAA,GAAwB,IAAIY,GAAA;IAC9B;IAEA,IAAIC,0BAAA,GAA6Bb,qBAAA,CAAsBc,GAAG,CAACT,cAAA,IAAkBE,UAAA;IAE7E,IAAIM,0BAAA,EAA4B;QAC9B,OAAOA,0BAAA;IACT;IAEAA,0BAAA,GAA6B,IAAID,GAAA;IAEjC,MAAM,EAAEG,oBAAA,EAAsBC,oBAAAA,EAAsB,OAAGjB,iOAAA,EAA0B;QAC/EM,cAAA;QACAC,MAAA;QACAC,UAAA;QACAC,IAAA,EAAMA,IAAA;QACNC,OAAA;QACAC;IACF;IAEAV,qBAAA,CAAsBiB,GAAG,CAACZ,cAAA,IAAkBE,UAAA,EAAYS,oBAAA;IAExDf,MAAA,mDAAOC,wBAAwB,GAAGF,qBAAA;IAElCC,MAAA,mDAAOU,kCAAkC,GAAG;IAE5C,OAAOK,oBAAA;AACT","ignoreList":[]}},
    {"offset": {"line": 596, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/utilities/buildFieldSchemaMap/index.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/utilities/buildFieldSchemaMap/index.ts"],"sourcesContent":["import type { I18n } from '@payloadcms/translations'\nimport type { Field, FieldSchemaMap, SanitizedConfig, TextField } from 'payload'\n\nimport { confirmPassword, password } from 'payload/shared'\n\nimport { traverseFields } from './traverseFields.js'\n\nconst baseAuthFields: Field[] = [\n  {\n    name: 'password',\n    type: 'text',\n    required: true,\n    validate: password,\n  },\n  {\n    name: 'confirm-password',\n    type: 'text',\n    required: true,\n    validate: confirmPassword,\n  },\n]\n\n/**\n * Flattens the config fields into a map of field schemas\n */\nexport const buildFieldSchemaMap = (args: {\n  collectionSlug?: string\n  config: SanitizedConfig\n  globalSlug?: string\n  i18n: I18n\n}): { fieldSchemaMap: FieldSchemaMap } => {\n  const { collectionSlug, config, globalSlug, i18n } = args\n\n  const schemaMap: FieldSchemaMap = new Map()\n\n  if (collectionSlug) {\n    const matchedCollection = config.collections.find(\n      (collection) => collection.slug === collectionSlug,\n    )\n\n    if (matchedCollection) {\n      let fieldsToSet = matchedCollection?.fields || []\n\n      if (matchedCollection.auth && !matchedCollection.auth.disableLocalStrategy) {\n        ;(baseAuthFields[0] as TextField).label = i18n.t('general:password')\n        ;(baseAuthFields[1] as TextField).label = i18n.t('authentication:confirmPassword')\n        // Place these fields _last_ to ensure they do not disrupt field paths in the field schema map\n        fieldsToSet = fieldsToSet.concat(baseAuthFields)\n      }\n\n      schemaMap.set(collectionSlug, {\n        fields: fieldsToSet,\n      })\n\n      traverseFields({\n        config,\n        fields: fieldsToSet,\n        i18n,\n        parentIndexPath: '',\n        parentSchemaPath: collectionSlug,\n        schemaMap,\n      })\n    }\n  } else if (globalSlug) {\n    const matchedGlobal = config.globals.find((global) => global.slug === globalSlug)\n\n    if (matchedGlobal) {\n      schemaMap.set(globalSlug, {\n        fields: matchedGlobal.fields,\n      })\n\n      traverseFields({\n        config,\n        fields: matchedGlobal.fields,\n        i18n,\n        parentIndexPath: '',\n        parentSchemaPath: globalSlug,\n        schemaMap,\n      })\n    }\n  }\n\n  return { fieldSchemaMap: schemaMap }\n}\n"],"names":["confirmPassword","password","traverseFields","baseAuthFields","name","type","required","validate","buildFieldSchemaMap","args","collectionSlug","config","globalSlug","i18n","schemaMap","Map","matchedCollection","collections","find","collection","slug","fieldsToSet","fields","auth","disableLocalStrategy","label","t","concat","set","parentIndexPath","parentSchemaPath","matchedGlobal","globals","global","fieldSchemaMap"],"mappings":";;;;AAGA,SAASA,eAAe,EAAEC,QAAQ,QAAQ;AAE1C,SAASC,cAAc,QAAQ;;;;;;;;AAE/B,MAAMC,cAAA,GAA0B;IAC9B;QACEC,IAAA,EAAM;QACNC,IAAA,EAAM;QACNC,QAAA,EAAU;QACVC,QAAA,EAAUN,8IAAAA;IACZ;IACA;QACEG,IAAA,EAAM;QACNC,IAAA,EAAM;QACNC,QAAA,EAAU;QACVC,QAAA,EAAUP,qJAAAA;IACZ;CACD;AAKM,MAAMQ,mBAAA,IAAuBC,IAAA;IAMlC,MAAM,EAAEC,cAAc,EAAEC,MAAM,EAAEC,UAAU,EAAEC,IAAAA,EAAM,GAAGJ,IAAA;IAErD,MAAMK,SAAA,GAA4B,IAAIC,GAAA;IAEtC,IAAIL,cAAA,EAAgB;QAClB,MAAMM,iBAAA,GAAoBL,MAAA,CAAOM,WAAW,CAACC,IAAI,EAC9CC,UAAA,GAAeA,UAAA,CAAWC,IAAI,KAAKV,cAAA;QAGtC,IAAIM,iBAAA,EAAmB;YACrB,IAAIK,WAAA,GAAcL,iBAAA,EAAmBM,MAAA,IAAU,EAAE;YAEjD,IAAIN,iBAAA,CAAkBO,IAAI,IAAI,CAACP,iBAAA,CAAkBO,IAAI,CAACC,oBAAoB,EAAE;;gBACxErB,cAAc,CAAC,EAAE,CAAesB,KAAK,GAAGZ,IAAA,CAAKa,CAAC,CAAC;gBAC/CvB,cAAc,CAAC,EAAE,CAAesB,KAAK,GAAGZ,IAAA,CAAKa,CAAC,CAAC;gBACjD,8FAAA;gBACAL,WAAA,GAAcA,WAAA,CAAYM,MAAM,CAACxB,cAAA;YACnC;YAEAW,SAAA,CAAUc,GAAG,CAAClB,cAAA,EAAgB;gBAC5BY,MAAA,EAAQD;YACV;gBAEAnB,yNAAA,EAAe;gBACbS,MAAA;gBACAW,MAAA,EAAQD,WAAA;gBACRR,IAAA;gBACAgB,eAAA,EAAiB;gBACjBC,gBAAA,EAAkBpB,cAAA;gBAClBI;YACF;QACF;IACF,OAAO,IAAIF,UAAA,EAAY;QACrB,MAAMmB,aAAA,GAAgBpB,MAAA,CAAOqB,OAAO,CAACd,IAAI,EAAEe,MAAA,GAAWA,MAAA,CAAOb,IAAI,KAAKR,UAAA;QAEtE,IAAImB,aAAA,EAAe;YACjBjB,SAAA,CAAUc,GAAG,CAAChB,UAAA,EAAY;gBACxBU,MAAA,EAAQS,aAAA,CAAcT,MAAAA;YACxB;gBAEApB,yNAAA,EAAe;gBACbS,MAAA;gBACAW,MAAA,EAAQS,aAAA,CAAcT,MAAM;gBAC5BT,IAAA;gBACAgB,eAAA,EAAiB;gBACjBC,gBAAA,EAAkBlB,UAAA;gBAClBE;YACF;QACF;IACF;IAEA,OAAO;QAAEoB,cAAA,EAAgBpB;IAAU;AACrC","ignoreList":[]}},
    {"offset": {"line": 676, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/utilities/getSchemaMap.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/utilities/getSchemaMap.ts"],"sourcesContent":["import type { I18n, I18nClient } from '@payloadcms/translations'\nimport type { FieldSchemaMap, SanitizedConfig } from 'payload'\n\nimport { cache } from 'react'\n\nimport { buildFieldSchemaMap } from './buildFieldSchemaMap/index.js'\n\nlet cachedSchemaMap = global._payload_schemaMap\n\nif (!cachedSchemaMap) {\n  cachedSchemaMap = global._payload_schemaMap = null\n}\n\nexport const getSchemaMap = cache(\n  (args: {\n    collectionSlug?: string\n    config: SanitizedConfig\n    globalSlug?: string\n    i18n: I18nClient\n  }): FieldSchemaMap => {\n    const { collectionSlug, config, globalSlug, i18n } = args\n\n    if (!cachedSchemaMap || global._payload_doNotCacheSchemaMap) {\n      cachedSchemaMap = new Map()\n    }\n\n    let cachedEntityFieldMap = cachedSchemaMap.get(collectionSlug || globalSlug)\n\n    if (cachedEntityFieldMap) {\n      return cachedEntityFieldMap\n    }\n\n    cachedEntityFieldMap = new Map()\n\n    const { fieldSchemaMap: entityFieldMap } = buildFieldSchemaMap({\n      collectionSlug,\n      config,\n      globalSlug,\n      i18n: i18n as I18n,\n    })\n\n    cachedSchemaMap.set(collectionSlug || globalSlug, entityFieldMap)\n\n    global._payload_schemaMap = cachedSchemaMap\n\n    global._payload_doNotCacheSchemaMap = false\n\n    return entityFieldMap\n  },\n)\n"],"names":["cache","buildFieldSchemaMap","cachedSchemaMap","global","_payload_schemaMap","getSchemaMap","args","collectionSlug","config","globalSlug","i18n","_payload_doNotCacheSchemaMap","Map","cachedEntityFieldMap","get","fieldSchemaMap","entityFieldMap","set"],"mappings":";;;;AAGA,SAASA,KAAK,QAAQ;AAEtB,SAASC,mBAAmB,QAAQ;;;;;;;AAEpC,IAAIC,eAAA,GAAkBC,MAAA,mDAAOC,kBAAkB;AAE/C,IAAI,CAACF,eAAA,EAAiB;IACpBA,eAAA,GAAkBC,MAAA,mDAAOC,kBAAkB,GAAG;AAChD;AAEO,MAAMC,YAAA,OAAeL,qNAAA,GACzBM,IAAA;IAMC,MAAM,EAAEC,cAAc,EAAEC,MAAM,EAAEC,UAAU,EAAEC,IAAAA,EAAM,GAAGJ,IAAA;IAErD,IAAI,CAACJ,eAAA,IAAmBC,MAAA,mDAAOQ,4BAA4B,EAAE;QAC3DT,eAAA,GAAkB,IAAIU,GAAA;IACxB;IAEA,IAAIC,oBAAA,GAAuBX,eAAA,CAAgBY,GAAG,CAACP,cAAA,IAAkBE,UAAA;IAEjE,IAAII,oBAAA,EAAsB;QACxB,OAAOA,oBAAA;IACT;IAEAA,oBAAA,GAAuB,IAAID,GAAA;IAE3B,MAAM,EAAEG,cAAA,EAAgBC,cAAAA,EAAgB,OAAGf,qNAAA,EAAoB;QAC7DM,cAAA;QACAC,MAAA;QACAC,UAAA;QACAC,IAAA,EAAMA;IACR;IAEAR,eAAA,CAAgBe,GAAG,CAACV,cAAA,IAAkBE,UAAA,EAAYO,cAAA;IAElDb,MAAA,mDAAOC,kBAAkB,GAAGF,eAAA;IAE5BC,MAAA,mDAAOQ,4BAA4B,GAAG;IAEtC,OAAOK,cAAA;AACT","ignoreList":[]}},
    {"offset": {"line": 718, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/utilities/handleFormStateLocking.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/utilities/handleFormStateLocking.ts"],"sourcesContent":["import type { PayloadRequest, TypedUser } from 'payload'\n\ntype Args = {\n  collectionSlug?: string\n  globalSlug?: string\n  id?: number | string\n  req: PayloadRequest\n  updateLastEdited?: boolean\n}\n\ntype Result = {\n  isLocked: boolean\n  lastEditedAt: string\n  user: TypedUser\n}\n\nconst lockDurationDefault = 300 // Default 5 minutes in seconds\n\nexport const handleFormStateLocking = async ({\n  id,\n  collectionSlug,\n  globalSlug,\n  req,\n  updateLastEdited,\n}: Args): Promise<Result> => {\n  let result: Result\n\n  if (id || globalSlug) {\n    let lockedDocumentQuery\n\n    if (collectionSlug) {\n      lockedDocumentQuery = {\n        and: [\n          { 'document.relationTo': { equals: collectionSlug } },\n          { 'document.value': { equals: id } },\n        ],\n      }\n    } else if (globalSlug) {\n      lockedDocumentQuery = {\n        and: [{ globalSlug: { equals: globalSlug } }],\n      }\n    }\n\n    const lockDocumentsProp = collectionSlug\n      ? req.payload.collections?.[collectionSlug]?.config.lockDocuments\n      : req.payload.config.globals.find((g) => g.slug === globalSlug)?.lockDocuments\n\n    const lockDuration =\n      typeof lockDocumentsProp === 'object' ? lockDocumentsProp.duration : lockDurationDefault\n    const lockDurationInMilliseconds = lockDuration * 1000\n    const now = new Date().getTime()\n\n    if (lockedDocumentQuery) {\n      // Query where the lock is newer than the current time minus the lock duration\n      lockedDocumentQuery.and.push({\n        updatedAt: {\n          greater_than: new Date(now - lockDurationInMilliseconds).toISOString(),\n        },\n      })\n\n      const lockedDocument = await req.payload.find({\n        collection: 'payload-locked-documents',\n        depth: 1,\n        limit: 1,\n        overrideAccess: false,\n        pagination: false,\n        user: req.user,\n        where: lockedDocumentQuery,\n      })\n\n      if (lockedDocument.docs && lockedDocument.docs.length > 0) {\n        result = {\n          isLocked: true,\n          lastEditedAt: lockedDocument.docs[0]?.updatedAt,\n          user: lockedDocument.docs[0]?.user?.value,\n        }\n\n        const lockOwnerID =\n          typeof lockedDocument.docs[0]?.user?.value === 'object'\n            ? lockedDocument.docs[0]?.user?.value?.id\n            : lockedDocument.docs[0]?.user?.value\n        // Should only update doc if the incoming / current user is also the owner of the locked doc\n        if (updateLastEdited && req.user && lockOwnerID === req.user.id) {\n          await req.payload.db.updateOne({\n            id: lockedDocument.docs[0].id,\n            collection: 'payload-locked-documents',\n            data: {},\n            returning: false,\n          })\n        }\n      } else {\n        // If NO ACTIVE lock document exists, first delete any expired locks and then create a fresh lock\n        // Where updatedAt is older than the duration that is specified in the config\n        let deleteExpiredLocksQuery\n\n        if (collectionSlug) {\n          deleteExpiredLocksQuery = {\n            and: [\n              { 'document.relationTo': { equals: collectionSlug } },\n              {\n                updatedAt: {\n                  less_than: new Date(now - lockDurationInMilliseconds).toISOString(),\n                },\n              },\n            ],\n          }\n        } else if (globalSlug) {\n          deleteExpiredLocksQuery = {\n            and: [\n              { globalSlug: { equals: globalSlug } },\n              {\n                updatedAt: {\n                  less_than: new Date(now - lockDurationInMilliseconds).toISOString(),\n                },\n              },\n            ],\n          }\n        }\n\n        await req.payload.db.deleteMany({\n          collection: 'payload-locked-documents',\n          where: deleteExpiredLocksQuery,\n        })\n\n        await req.payload.db.create({\n          collection: 'payload-locked-documents',\n          data: {\n            document: collectionSlug\n              ? {\n                  relationTo: collectionSlug,\n                  value: id,\n                }\n              : undefined,\n            globalSlug: globalSlug ? globalSlug : undefined,\n            user: {\n              relationTo: req.user.collection,\n              value: req.user.id,\n            },\n          },\n          returning: false,\n        })\n\n        result = {\n          isLocked: true,\n          lastEditedAt: new Date().toISOString(),\n          user: req.user,\n        }\n      }\n    }\n  }\n\n  return result\n}\n"],"names":["lockDurationDefault","handleFormStateLocking","id","collectionSlug","globalSlug","req","updateLastEdited","result","lockedDocumentQuery","and","equals","lockDocumentsProp","payload","collections","config","lockDocuments","globals","find","g","slug","lockDuration","duration","lockDurationInMilliseconds","now","Date","getTime","push","updatedAt","greater_than","toISOString","lockedDocument","collection","depth","limit","overrideAccess","pagination","user","where","docs","length","isLocked","lastEditedAt","value","lockOwnerID","db","updateOne","data","returning","deleteExpiredLocksQuery","less_than","deleteMany","create","document","relationTo","undefined"],"mappings":";;;;AAgBA,MAAMA,mBAAA,GAAsB,IAAI,+BAAA;;AAEzB,MAAMC,sBAAA,GAAyB,MAAAA,CAAO,EAC3CC,EAAE,EACFC,cAAc,EACdC,UAAU,EACVC,GAAG,EACHC,gBAAAA,EACK;IACL,IAAIC,MAAA;IAEJ,IAAIL,EAAA,IAAME,UAAA,EAAY;QACpB,IAAII,mBAAA;QAEJ,IAAIL,cAAA,EAAgB;YAClBK,mBAAA,GAAsB;gBACpBC,GAAA,EAAK;oBACH;wBAAE,uBAAuB;4BAAEC,MAAA,EAAQP;wBAAe;oBAAE;oBACpD;wBAAE,kBAAkB;4BAAEO,MAAA,EAAQR;wBAAG;oBAAE;iBAAA;YAEvC;QACF,OAAO,IAAIE,UAAA,EAAY;YACrBI,mBAAA,GAAsB;gBACpBC,GAAA,EAAK;oBAAC;wBAAEL,UAAA,EAAY;4BAAEM,MAAA,EAAQN;wBAAW;oBAAE;iBAAA;YAC7C;QACF;QAEA,MAAMO,iBAAA,GAAoBR,cAAA,GACtBE,GAAA,CAAIO,OAAO,CAACC,WAAW,EAAA,CAAGV,cAAA,CAAe,EAAEW,MAAA,CAAOC,aAAA,GAClDV,GAAA,CAAIO,OAAO,CAACE,MAAM,CAACE,OAAO,CAACC,IAAI,EAAEC,CAAA,GAAMA,CAAA,CAAEC,IAAI,KAAKf,UAAA,GAAaW,aAAA;QAEnE,MAAMK,YAAA,GACJ,OAAOT,iBAAA,KAAsB,WAAWA,iBAAA,CAAkBU,QAAQ,GAAGrB,mBAAA;QACvE,MAAMsB,0BAAA,GAA6BF,YAAA,GAAe;QAClD,MAAMG,GAAA,GAAM,IAAIC,IAAA,GAAOC,OAAO;QAE9B,IAAIjB,mBAAA,EAAqB;YACvB,8EAAA;YACAA,mBAAA,CAAoBC,GAAG,CAACiB,IAAI,CAAC;gBAC3BC,SAAA,EAAW;oBACTC,YAAA,EAAc,IAAIJ,IAAA,CAAKD,GAAA,GAAMD,0BAAA,EAA4BO,WAAW;gBACtE;YACF;YAEA,MAAMC,cAAA,GAAiB,MAAMzB,GAAA,CAAIO,OAAO,CAACK,IAAI,CAAC;gBAC5Cc,UAAA,EAAY;gBACZC,KAAA,EAAO;gBACPC,KAAA,EAAO;gBACPC,cAAA,EAAgB;gBAChBC,UAAA,EAAY;gBACZC,IAAA,EAAM/B,GAAA,CAAI+B,IAAI;gBACdC,KAAA,EAAO7B;YACT;YAEA,IAAIsB,cAAA,CAAeQ,IAAI,IAAIR,cAAA,CAAeQ,IAAI,CAACC,MAAM,GAAG,GAAG;gBACzDhC,MAAA,GAAS;oBACPiC,QAAA,EAAU;oBACVC,YAAA,EAAcX,cAAA,CAAeQ,IAAI,CAAC,EAAE,EAAEX,SAAA;oBACtCS,IAAA,EAAMN,cAAA,CAAeQ,IAAI,CAAC,EAAE,EAAEF,IAAA,EAAMM;gBACtC;gBAEA,MAAMC,WAAA,GACJ,OAAOb,cAAA,CAAeQ,IAAI,CAAC,EAAE,EAAEF,IAAA,EAAMM,KAAA,KAAU,WAC3CZ,cAAA,CAAeQ,IAAI,CAAC,EAAE,EAAEF,IAAA,EAAMM,KAAA,EAAOxC,EAAA,GACrC4B,cAAA,CAAeQ,IAAI,CAAC,EAAE,EAAEF,IAAA,EAAMM,KAAA;gBACpC,4FAAA;gBACA,IAAIpC,gBAAA,IAAoBD,GAAA,CAAI+B,IAAI,IAAIO,WAAA,KAAgBtC,GAAA,CAAI+B,IAAI,CAAClC,EAAE,EAAE;oBAC/D,MAAMG,GAAA,CAAIO,OAAO,CAACgC,EAAE,CAACC,SAAS,CAAC;wBAC7B3C,EAAA,EAAI4B,cAAA,CAAeQ,IAAI,CAAC,EAAE,CAACpC,EAAE;wBAC7B6B,UAAA,EAAY;wBACZe,IAAA,EAAM,CAAC;wBACPC,SAAA,EAAW;oBACb;gBACF;YACF,OAAO;gBACL,iGAAA;gBACA,6EAAA;gBACA,IAAIC,uBAAA;gBAEJ,IAAI7C,cAAA,EAAgB;oBAClB6C,uBAAA,GAA0B;wBACxBvC,GAAA,EAAK;4BACH;gCAAE,uBAAuB;oCAAEC,MAAA,EAAQP;gCAAe;4BAAE;4BACpD;gCACEwB,SAAA,EAAW;oCACTsB,SAAA,EAAW,IAAIzB,IAAA,CAAKD,GAAA,GAAMD,0BAAA,EAA4BO,WAAW;gCACnE;4BACF;yBAAA;oBAEJ;gBACF,OAAO,IAAIzB,UAAA,EAAY;oBACrB4C,uBAAA,GAA0B;wBACxBvC,GAAA,EAAK;4BACH;gCAAEL,UAAA,EAAY;oCAAEM,MAAA,EAAQN;gCAAW;4BAAE;4BACrC;gCACEuB,SAAA,EAAW;oCACTsB,SAAA,EAAW,IAAIzB,IAAA,CAAKD,GAAA,GAAMD,0BAAA,EAA4BO,WAAW;gCACnE;4BACF;yBAAA;oBAEJ;gBACF;gBAEA,MAAMxB,GAAA,CAAIO,OAAO,CAACgC,EAAE,CAACM,UAAU,CAAC;oBAC9BnB,UAAA,EAAY;oBACZM,KAAA,EAAOW;gBACT;gBAEA,MAAM3C,GAAA,CAAIO,OAAO,CAACgC,EAAE,CAACO,MAAM,CAAC;oBAC1BpB,UAAA,EAAY;oBACZe,IAAA,EAAM;wBACJM,QAAA,EAAUjD,cAAA,GACN;4BACEkD,UAAA,EAAYlD,cAAA;4BACZuC,KAAA,EAAOxC;wBACT,IACAoD,SAAA;wBACJlD,UAAA,EAAYA,UAAA,GAAaA,UAAA,GAAakD,SAAA;wBACtClB,IAAA,EAAM;4BACJiB,UAAA,EAAYhD,GAAA,CAAI+B,IAAI,CAACL,UAAU;4BAC/BW,KAAA,EAAOrC,GAAA,CAAI+B,IAAI,CAAClC,EAAAA;wBAClB;oBACF;oBACA6C,SAAA,EAAW;gBACb;gBAEAxC,MAAA,GAAS;oBACPiC,QAAA,EAAU;oBACVC,YAAA,EAAc,IAAIjB,IAAA,GAAOK,WAAW;oBACpCO,IAAA,EAAM/B,GAAA,CAAI+B,IAAAA;gBACZ;YACF;QACF;IACF;IAEA,OAAO7B,MAAA;AACT","ignoreList":[]}},
    {"offset": {"line": 858, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/utilities/handleLivePreview.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/utilities/handleLivePreview.ts"],"sourcesContent":["import type {\n  CollectionConfig,\n  GlobalConfig,\n  LivePreviewConfig,\n  LivePreviewURLType,\n  Operation,\n  PayloadRequest,\n  SanitizedConfig,\n} from 'payload'\n\nexport const getLivePreviewConfig = ({\n  collectionConfig,\n  config,\n  globalConfig,\n  isLivePreviewEnabled,\n}: {\n  collectionConfig?: CollectionConfig\n  config: SanitizedConfig\n  globalConfig?: GlobalConfig\n  isLivePreviewEnabled: boolean\n}) => ({\n  ...(isLivePreviewEnabled ? config.admin.livePreview : {}),\n  ...(collectionConfig?.admin?.livePreview || {}),\n  ...(globalConfig?.admin?.livePreview || {}),\n})\n\n/**\n * Multi-level check to determine whether live preview is enabled on a collection or global.\n * For example, live preview can be enabled at both the root config level, or on the entity's config.\n * If a collectionConfig/globalConfig is provided, checks if it is enabled at the root level,\n * or on the entity's own config.\n */\nexport const isLivePreviewEnabled = ({\n  collectionConfig,\n  config,\n  globalConfig,\n}: {\n  collectionConfig?: CollectionConfig\n  config: SanitizedConfig\n  globalConfig?: GlobalConfig\n}): boolean => {\n  if (globalConfig) {\n    return Boolean(\n      config.admin?.livePreview?.globals?.includes(globalConfig.slug) ||\n        globalConfig.admin?.livePreview,\n    )\n  }\n\n  if (collectionConfig) {\n    return Boolean(\n      config.admin?.livePreview?.collections?.includes(collectionConfig.slug) ||\n        collectionConfig.admin?.livePreview,\n    )\n  }\n}\n\n/**\n * 1. Looks up the relevant live preview config, which could have been enabled:\n *   a. At the root level, e.g. `collections: ['posts']`\n *   b. On the collection or global config, e.g. `admin: { livePreview: { ... } }`\n * 2. Determines if live preview is enabled, and if not, early returns.\n * 3. Merges the config with the root config, if necessary.\n * 4. Executes the `url` function, if necessary.\n *\n * Notice: internal function only. Subject to change at any time. Use at your own risk.\n */\nexport const handleLivePreview = async ({\n  collectionSlug,\n  config,\n  data,\n  globalSlug,\n  operation,\n  req,\n}: {\n  collectionSlug?: string\n  config: SanitizedConfig\n  data: Record<string, unknown>\n  globalSlug?: string\n  operation?: Operation\n  req: PayloadRequest\n}): Promise<{\n  isLivePreviewEnabled?: boolean\n  livePreviewConfig?: LivePreviewConfig\n  livePreviewURL?: LivePreviewURLType\n}> => {\n  const collectionConfig = collectionSlug\n    ? req.payload.collections[collectionSlug]?.config\n    : undefined\n\n  const globalConfig = globalSlug ? config.globals.find((g) => g.slug === globalSlug) : undefined\n\n  const enabled = isLivePreviewEnabled({\n    collectionConfig,\n    config,\n    globalConfig,\n  })\n\n  if (!enabled) {\n    return {}\n  }\n\n  const livePreviewConfig = getLivePreviewConfig({\n    collectionConfig,\n    config,\n    globalConfig,\n    isLivePreviewEnabled: enabled,\n  })\n\n  let livePreviewURL: string | undefined\n\n  if (typeof livePreviewConfig?.url === 'string') {\n    livePreviewURL = livePreviewConfig.url\n  }\n\n  if (typeof livePreviewConfig?.url === 'function' && operation !== 'create') {\n    try {\n      const result = await livePreviewConfig.url({\n        collectionConfig,\n        data,\n        globalConfig,\n        locale: { code: req.locale, label: '' },\n        payload: req.payload,\n        req,\n      })\n\n      if (typeof result === 'string') {\n        livePreviewURL = result\n      }\n    } catch (err) {\n      req.payload.logger.error({\n        err,\n        msg: `There was an error executing the live preview URL function for ${collectionSlug || globalSlug}`,\n      })\n    }\n  }\n\n  return { isLivePreviewEnabled: enabled, livePreviewConfig, livePreviewURL }\n}\n"],"names":["getLivePreviewConfig","collectionConfig","config","globalConfig","isLivePreviewEnabled","admin","livePreview","Boolean","globals","includes","slug","collections","handleLivePreview","collectionSlug","data","globalSlug","operation","req","payload","undefined","find","g","enabled","livePreviewConfig","livePreviewURL","url","result","locale","code","label","err","logger","error","msg"],"mappings":";;;;;;;;AAUO,MAAMA,oBAAA,GAAuBA,CAAC,EACnCC,gBAAgB,EAChBC,MAAM,EACNC,YAAY,EACZC,oBAAAA,EAMD,GAAA,CAAM;QACL,GAAIA,oBAAA,GAAuBF,MAAA,CAAOG,KAAK,CAACC,WAAW,GAAG,CAAC,CAAC;QACxD,GAAIL,gBAAA,EAAkBI,KAAA,EAAOC,WAAA,IAAe,CAAC,CAAC;QAC9C,GAAIH,YAAA,EAAcE,KAAA,EAAOC,WAAA,IAAe,CAAC,CAAC;IAC5C,CAAA;AAQO,MAAMF,oBAAA,GAAuBA,CAAC,EACnCH,gBAAgB,EAChBC,MAAM,EACNC,YAAAA,EAKD;IACC,IAAIA,YAAA,EAAc;QAChB,OAAOI,OAAA,CACLL,MAAA,CAAOG,KAAK,EAAEC,WAAA,EAAaE,OAAA,EAASC,QAAA,CAASN,YAAA,CAAaO,IAAI,KAC5DP,YAAA,CAAaE,KAAK,EAAEC,WAAA;IAE1B;IAEA,IAAIL,gBAAA,EAAkB;QACpB,OAAOM,OAAA,CACLL,MAAA,CAAOG,KAAK,EAAEC,WAAA,EAAaK,WAAA,EAAaF,QAAA,CAASR,gBAAA,CAAiBS,IAAI,KACpET,gBAAA,CAAiBI,KAAK,EAAEC,WAAA;IAE9B;AACF;AAYO,MAAMM,iBAAA,GAAoB,MAAAA,CAAO,EACtCC,cAAc,EACdX,MAAM,EACNY,IAAI,EACJC,UAAU,EACVC,SAAS,EACTC,GAAAA,EAQD;IAKC,MAAMhB,gBAAA,GAAmBY,cAAA,GACrBI,GAAA,CAAIC,OAAO,CAACP,WAAW,CAACE,cAAA,CAAe,EAAEX,MAAA,GACzCiB,SAAA;IAEJ,MAAMhB,YAAA,GAAeY,UAAA,GAAab,MAAA,CAAOM,OAAO,CAACY,IAAI,EAAEC,CAAA,GAAMA,CAAA,CAAEX,IAAI,KAAKK,UAAA,IAAcI,SAAA;IAEtF,MAAMG,OAAA,GAAUlB,oBAAA,CAAqB;QACnCH,gBAAA;QACAC,MAAA;QACAC;IACF;IAEA,IAAI,CAACmB,OAAA,EAAS;QACZ,OAAO,CAAC;IACV;IAEA,MAAMC,iBAAA,GAAoBvB,oBAAA,CAAqB;QAC7CC,gBAAA;QACAC,MAAA;QACAC,YAAA;QACAC,oBAAA,EAAsBkB;IACxB;IAEA,IAAIE,cAAA;IAEJ,IAAI,OAAOD,iBAAA,EAAmBE,GAAA,KAAQ,UAAU;QAC9CD,cAAA,GAAiBD,iBAAA,CAAkBE,GAAG;IACxC;IAEA,IAAI,OAAOF,iBAAA,EAAmBE,GAAA,KAAQ,cAAcT,SAAA,KAAc,UAAU;QAC1E,IAAI;YACF,MAAMU,MAAA,GAAS,MAAMH,iBAAA,CAAkBE,GAAG,CAAC;gBACzCxB,gBAAA;gBACAa,IAAA;gBACAX,YAAA;gBACAwB,MAAA,EAAQ;oBAAEC,IAAA,EAAMX,GAAA,CAAIU,MAAM;oBAAEE,KAAA,EAAO;gBAAG;gBACtCX,OAAA,EAASD,GAAA,CAAIC,OAAO;gBACpBD;YACF;YAEA,IAAI,OAAOS,MAAA,KAAW,UAAU;gBAC9BF,cAAA,GAAiBE,MAAA;YACnB;QACF,EAAE,OAAOI,GAAA,EAAK;YACZb,GAAA,CAAIC,OAAO,CAACa,MAAM,CAACC,KAAK,CAAC;gBACvBF,GAAA;gBACAG,GAAA,EAAK,CAAA,+DAAA,EAAkEpB,cAAA,IAAkBE,UAAA,EAAA;YAC3F;QACF;IACF;IAEA,OAAO;QAAEX,oBAAA,EAAsBkB,OAAA;QAASC,iBAAA;QAAmBC;IAAe;AAC5E","ignoreList":[]}},
    {"offset": {"line": 935, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/utilities/handlePreview.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/utilities/handlePreview.ts"],"sourcesContent":["import {\n  type CollectionConfig,\n  extractJWT,\n  type GlobalConfig,\n  type Operation,\n  type PayloadRequest,\n  type SanitizedConfig,\n} from 'payload'\n\n/**\n * Multi-level check to determine whether live preview is enabled on a collection or global.\n * For example, live preview can be enabled at both the root config level, or on the entity's config.\n * If a collectionConfig/globalConfig is provided, checks if it is enabled at the root level,\n * or on the entity's own config.\n */\nexport const isPreviewEnabled = ({\n  collectionConfig,\n  globalConfig,\n}: {\n  collectionConfig?: CollectionConfig\n  globalConfig?: GlobalConfig\n}): boolean => {\n  if (globalConfig) {\n    return Boolean(globalConfig.admin?.preview)\n  }\n\n  if (collectionConfig) {\n    return Boolean(collectionConfig.admin?.preview)\n  }\n}\n\n/**\n * 1. Looks up the relevant live preview config, which could have been enabled:\n *   a. At the root level, e.g. `collections: ['posts']`\n *   b. On the collection or global config, e.g. `admin: { livePreview: { ... } }`\n * 2. Determines if live preview is enabled, and if not, early returns.\n * 3. Merges the config with the root config, if necessary.\n * 4. Executes the `url` function, if necessary.\n *\n * Notice: internal function only. Subject to change at any time. Use at your own risk.\n */\nexport const handlePreview = async ({\n  collectionSlug,\n  config,\n  data,\n  globalSlug,\n  operation,\n  req,\n}: {\n  collectionSlug?: string\n  config: SanitizedConfig\n  data: Record<string, unknown>\n  globalSlug?: string\n  operation?: Operation\n  req: PayloadRequest\n}): Promise<{\n  isPreviewEnabled?: boolean\n  previewURL?: string\n}> => {\n  const collectionConfig = collectionSlug\n    ? req.payload.collections[collectionSlug]?.config\n    : undefined\n\n  const globalConfig = globalSlug ? config.globals.find((g) => g.slug === globalSlug) : undefined\n\n  const enabled = isPreviewEnabled({\n    collectionConfig,\n    globalConfig,\n  })\n\n  if (!enabled) {\n    return {}\n  }\n\n  const generatePreviewURL = collectionConfig?.admin?.preview || globalConfig?.admin?.preview\n  const token = extractJWT(req)\n  let previewURL: string | undefined\n\n  if (typeof generatePreviewURL === 'function' && operation !== 'create') {\n    try {\n      const result = await generatePreviewURL(data, { locale: req.locale, req, token })\n\n      if (typeof result === 'string') {\n        previewURL = result\n      }\n    } catch (err) {\n      req.payload.logger.error({\n        err,\n        msg: `There was an error executing the live preview URL function for ${collectionSlug || globalSlug}`,\n      })\n    }\n  }\n\n  return { isPreviewEnabled: enabled, previewURL }\n}\n"],"names":["extractJWT","isPreviewEnabled","collectionConfig","globalConfig","Boolean","admin","preview","handlePreview","collectionSlug","config","data","globalSlug","operation","req","payload","collections","undefined","globals","find","g","slug","enabled","generatePreviewURL","token","previewURL","result","locale","err","logger","error","msg"],"mappings":";;;;;;AAAA,SAEEA,UAAU,QAKL;;;;;;AAQA,MAAMC,gBAAA,GAAmBA,CAAC,EAC/BC,gBAAgB,EAChBC,YAAAA,EAID;IACC,IAAIA,YAAA,EAAc;QAChB,OAAOC,OAAA,CAAQD,YAAA,CAAaE,KAAK,EAAEC,OAAA;IACrC;IAEA,IAAIJ,gBAAA,EAAkB;QACpB,OAAOE,OAAA,CAAQF,gBAAA,CAAiBG,KAAK,EAAEC,OAAA;IACzC;AACF;AAYO,MAAMC,aAAA,GAAgB,MAAAA,CAAO,EAClCC,cAAc,EACdC,MAAM,EACNC,IAAI,EACJC,UAAU,EACVC,SAAS,EACTC,GAAAA,EAQD;IAIC,MAAMX,gBAAA,GAAmBM,cAAA,GACrBK,GAAA,CAAIC,OAAO,CAACC,WAAW,CAACP,cAAA,CAAe,EAAEC,MAAA,GACzCO,SAAA;IAEJ,MAAMb,YAAA,GAAeQ,UAAA,GAAaF,MAAA,CAAOQ,OAAO,CAACC,IAAI,EAAEC,CAAA,GAAMA,CAAA,CAAEC,IAAI,KAAKT,UAAA,IAAcK,SAAA;IAEtF,MAAMK,OAAA,GAAUpB,gBAAA,CAAiB;QAC/BC,gBAAA;QACAC;IACF;IAEA,IAAI,CAACkB,OAAA,EAAS;QACZ,OAAO,CAAC;IACV;IAEA,MAAMC,kBAAA,GAAqBpB,gBAAA,EAAkBG,KAAA,EAAOC,OAAA,IAAWH,YAAA,EAAcE,KAAA,EAAOC,OAAA;IACpF,MAAMiB,KAAA,OAAQvB,4HAAA,EAAWa,GAAA;IACzB,IAAIW,UAAA;IAEJ,IAAI,OAAOF,kBAAA,KAAuB,cAAcV,SAAA,KAAc,UAAU;QACtE,IAAI;YACF,MAAMa,MAAA,GAAS,MAAMH,kBAAA,CAAmBZ,IAAA,EAAM;gBAAEgB,MAAA,EAAQb,GAAA,CAAIa,MAAM;gBAAEb,GAAA;gBAAKU;YAAM;YAE/E,IAAI,OAAOE,MAAA,KAAW,UAAU;gBAC9BD,UAAA,GAAaC,MAAA;YACf;QACF,EAAE,OAAOE,GAAA,EAAK;YACZd,GAAA,CAAIC,OAAO,CAACc,MAAM,CAACC,KAAK,CAAC;gBACvBF,GAAA;gBACAG,GAAA,EAAK,CAAA,+DAAA,EAAkEtB,cAAA,IAAkBG,UAAA,EAAA;YAC3F;QACF;IACF;IAEA,OAAO;QAAEV,gBAAA,EAAkBoB,OAAA;QAASG;IAAW;AACjD","ignoreList":[]}},
    {"offset": {"line": 997, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/utilities/buildFormState.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/utilities/buildFormState.ts"],"sourcesContent":["import type {\n  BuildFormStateArgs,\n  ClientConfig,\n  ClientUser,\n  ErrorResult,\n  FormState,\n  ServerFunction,\n} from 'payload'\n\nimport { canAccessAdmin, formatErrors } from 'payload'\nimport { getSelectMode, reduceFieldsToValues } from 'payload/shared'\n\nimport { fieldSchemasToFormState } from '../forms/fieldSchemasToFormState/index.js'\nimport { renderField } from '../forms/fieldSchemasToFormState/renderField.js'\nimport { getClientConfig } from './getClientConfig.js'\nimport { getClientSchemaMap } from './getClientSchemaMap.js'\nimport { getSchemaMap } from './getSchemaMap.js'\nimport { handleFormStateLocking } from './handleFormStateLocking.js'\nimport { handleLivePreview } from './handleLivePreview.js'\nimport { handlePreview } from './handlePreview.js'\n\nexport type LockedState = {\n  isLocked: boolean\n  lastEditedAt: string\n  user: ClientUser | number | string\n}\n\ntype BuildFormStateSuccessResult = {\n  clientConfig?: ClientConfig\n  errors?: never\n  indexPath?: string\n  livePreviewURL?: string\n  lockedState?: LockedState\n  previewURL?: string\n  state: FormState\n}\n\ntype BuildFormStateErrorResult = {\n  livePreviewURL?: never\n  lockedState?: never\n  previewURL?: never\n  state?: never\n} & (\n  | {\n      message: string\n    }\n  | ErrorResult\n)\n\nexport type BuildFormStateResult = BuildFormStateErrorResult | BuildFormStateSuccessResult\n\nexport const buildFormStateHandler: ServerFunction<\n  BuildFormStateArgs,\n  Promise<BuildFormStateResult>\n> = async (args) => {\n  const { req } = args\n\n  try {\n    await canAccessAdmin({ req })\n    const res = await buildFormState(args)\n\n    return res\n  } catch (err) {\n    req.payload.logger.error({ err, msg: `There was an error building form state` })\n\n    if (err.message === 'Could not find field schema for given path') {\n      return {\n        message: err.message,\n      }\n    }\n\n    if (err.message === 'Unauthorized') {\n      throw new Error('Unauthorized')\n    }\n\n    return formatErrors(err)\n  }\n}\n\nexport const buildFormState = async (\n  args: BuildFormStateArgs,\n): Promise<BuildFormStateSuccessResult> => {\n  const {\n    id: idFromArgs,\n    collectionSlug,\n    data: incomingData,\n    docPermissions,\n    docPreferences,\n    documentFormState,\n    formState,\n    globalSlug,\n    initialBlockData,\n    initialBlockFormState,\n    mockRSCs,\n    operation,\n    readOnly,\n    renderAllFields,\n    req,\n    req: {\n      i18n,\n      payload,\n      payload: { config },\n    },\n    returnLivePreviewURL,\n    returnLockStatus,\n    returnPreviewURL,\n    schemaPath = collectionSlug || globalSlug,\n    select,\n    skipClientConfigAuth,\n    skipValidation,\n    updateLastEdited,\n  } = args\n\n  const selectMode = select ? getSelectMode(select) : undefined\n\n  if (!collectionSlug && !globalSlug) {\n    throw new Error('Either collectionSlug or globalSlug must be provided')\n  }\n\n  const schemaMap = getSchemaMap({\n    collectionSlug,\n    config,\n    globalSlug,\n    i18n,\n  })\n\n  const clientSchemaMap = getClientSchemaMap({\n    collectionSlug,\n    config: getClientConfig({\n      config,\n      i18n,\n      importMap: req.payload.importMap,\n      user: skipClientConfigAuth ? true : req.user,\n    }),\n    globalSlug,\n    i18n,\n    payload,\n    schemaMap,\n  })\n\n  const id = collectionSlug ? idFromArgs : undefined\n  const fieldOrEntityConfig = schemaMap.get(schemaPath)\n\n  if (!fieldOrEntityConfig) {\n    throw new Error(`Could not find \"${schemaPath}\" in the fieldSchemaMap`)\n  }\n\n  if (\n    (!('fields' in fieldOrEntityConfig) ||\n      !fieldOrEntityConfig.fields ||\n      !fieldOrEntityConfig.fields.length) &&\n    'type' in fieldOrEntityConfig &&\n    fieldOrEntityConfig.type !== 'blocks'\n  ) {\n    throw new Error(\n      `The field found in fieldSchemaMap for \"${schemaPath}\" does not contain any subfields.`,\n    )\n  }\n\n  // If there is form state but no data, deduce data from that form state, e.g. on initial load\n  // Otherwise, use the incoming data as the source of truth, e.g. on subsequent saves\n  const data = incomingData || reduceFieldsToValues(formState, true)\n\n  let documentData = undefined\n\n  if (documentFormState) {\n    documentData = reduceFieldsToValues(documentFormState, true)\n  }\n\n  let blockData = initialBlockData\n\n  if (initialBlockFormState) {\n    blockData = reduceFieldsToValues(initialBlockFormState, true)\n  }\n\n  /**\n   * When building state for sub schemas we need to adjust:\n   * - `fields`\n   * - `parentSchemaPath`\n   * - `parentPath`\n   *\n   * Type assertion is fine because we wrap sub schemas in an array\n   * so we can safely map over them within `fieldSchemasToFormState`\n   */\n  const fields = Array.isArray(fieldOrEntityConfig)\n    ? fieldOrEntityConfig\n    : 'fields' in fieldOrEntityConfig\n      ? fieldOrEntityConfig.fields\n      : [fieldOrEntityConfig]\n\n  // Ensure data.id is present during form state requests, where the data\n  // is passed from the client as an argument, without the ID\n  if (!data.id && id) {\n    data.id = id\n  }\n\n  const formStateResult = await fieldSchemasToFormState({\n    id,\n    clientFieldSchemaMap: clientSchemaMap,\n    collectionSlug,\n    data,\n    documentData,\n    fields,\n    fieldSchemaMap: schemaMap,\n    initialBlockData: blockData,\n    mockRSCs,\n    operation,\n    permissions: docPermissions?.fields || {},\n    preferences: docPreferences || { fields: {} },\n    previousFormState: formState,\n    readOnly,\n    renderAllFields,\n    renderFieldFn: renderField,\n    req,\n    schemaPath,\n    select,\n    selectMode,\n    skipValidation,\n  })\n\n  // Maintain form state of auth / upload fields\n  if (collectionSlug && formState) {\n    if (payload.collections[collectionSlug]?.config?.upload && formState.file) {\n      formStateResult.file = formState.file\n    }\n  }\n\n  let lockedStateResult\n\n  if (returnLockStatus) {\n    lockedStateResult = await handleFormStateLocking({\n      id,\n      collectionSlug,\n      globalSlug,\n      req,\n      updateLastEdited,\n    })\n  }\n\n  const res: BuildFormStateSuccessResult = {\n    lockedState: lockedStateResult,\n    state: formStateResult,\n  }\n\n  if (returnLivePreviewURL) {\n    const { livePreviewURL } = await handleLivePreview({\n      collectionSlug,\n      config,\n      data,\n      globalSlug,\n      req,\n    })\n\n    // Important: only set this when not undefined,\n    // Otherwise it will travel through the network as `$undefined`\n    if (livePreviewURL) {\n      res.livePreviewURL = livePreviewURL\n    }\n  }\n\n  if (returnPreviewURL) {\n    const { previewURL } = await handlePreview({\n      collectionSlug,\n      config,\n      data,\n      globalSlug,\n      req,\n    })\n\n    // Important: only set this when not undefined,\n    // Otherwise it will travel through the network as `$undefined`\n    if (previewURL) {\n      res.previewURL = previewURL\n    }\n  }\n\n  return res\n}\n"],"names":["canAccessAdmin","formatErrors","getSelectMode","reduceFieldsToValues","fieldSchemasToFormState","renderField","getClientConfig","getClientSchemaMap","getSchemaMap","handleFormStateLocking","handleLivePreview","handlePreview","buildFormStateHandler","args","req","res","buildFormState","err","payload","logger","error","msg","message","Error","id","idFromArgs","collectionSlug","data","incomingData","docPermissions","docPreferences","documentFormState","formState","globalSlug","initialBlockData","initialBlockFormState","mockRSCs","operation","readOnly","renderAllFields","i18n","config","returnLivePreviewURL","returnLockStatus","returnPreviewURL","schemaPath","select","skipClientConfigAuth","skipValidation","updateLastEdited","selectMode","undefined","schemaMap","clientSchemaMap","importMap","user","fieldOrEntityConfig","get","fields","length","type","documentData","blockData","Array","isArray","formStateResult","clientFieldSchemaMap","fieldSchemaMap","permissions","preferences","previousFormState","renderFieldFn","collections","upload","file","lockedStateResult","lockedState","state","livePreviewURL","previewURL"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 1200, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/utilities/getFolderResultsComponentAndData.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/utilities/getFolderResultsComponentAndData.tsx"],"sourcesContent":["import type {\n  CollectionSlug,\n  ErrorResult,\n  GetFolderResultsComponentAndDataArgs,\n  ServerFunction,\n  Where,\n} from 'payload'\nimport type { FolderBreadcrumb, FolderOrDocument } from 'payload/shared'\n\nimport { APIError, formatErrors, getFolderData } from 'payload'\nimport { buildFolderWhereConstraints, combineWhereConstraints } from 'payload/shared'\n\nimport {\n  FolderFileTable,\n  ItemCardGrid,\n  // eslint-disable-next-line payload/no-imports-from-exports-dir -- This component is returned via server functions, it must reference the exports dir\n} from '../exports/client/index.js'\n\ntype GetFolderResultsComponentAndDataResult = {\n  breadcrumbs?: FolderBreadcrumb[]\n  documents?: FolderOrDocument[]\n  folderAssignedCollections?: CollectionSlug[]\n  FolderResultsComponent: React.ReactNode\n  subfolders?: FolderOrDocument[]\n}\n\ntype GetFolderResultsComponentAndDataErrorResult = {\n  breadcrumbs?: never\n  documents?: never\n  FolderResultsComponent?: never\n  subfolders?: never\n} & (\n  | {\n      message: string\n    }\n  | ErrorResult\n)\n\nexport const getFolderResultsComponentAndDataHandler: ServerFunction<\n  GetFolderResultsComponentAndDataArgs,\n  Promise<GetFolderResultsComponentAndDataErrorResult | GetFolderResultsComponentAndDataResult>\n> = async (args) => {\n  const { req } = args\n\n  try {\n    const res = await getFolderResultsComponentAndData(args)\n    return res\n  } catch (err) {\n    req.payload.logger.error({\n      err,\n      msg: `There was an error getting the folder results component and data`,\n    })\n\n    return formatErrors(err)\n  }\n}\n\n/**\n * This function is responsible for fetching folder data, building the results component\n * and returns the data and component together.\n */\nexport const getFolderResultsComponentAndData = async ({\n  browseByFolder = false,\n  collectionsToDisplay: activeCollectionSlugs,\n  displayAs,\n  folderAssignedCollections,\n  folderID = undefined,\n  req,\n  sort,\n}: GetFolderResultsComponentAndDataArgs): Promise<GetFolderResultsComponentAndDataResult> => {\n  const { payload } = req\n\n  if (!payload.config.folders) {\n    throw new APIError('Folders are not enabled in the configuration.')\n  }\n\n  const emptyQuery = {\n    id: {\n      exists: false,\n    },\n  }\n\n  let collectionSlug: CollectionSlug | undefined = undefined\n  let documentWhere: undefined | Where =\n    Array.isArray(activeCollectionSlugs) && !activeCollectionSlugs.length ? emptyQuery : undefined\n  let folderWhere: undefined | Where =\n    Array.isArray(activeCollectionSlugs) && !activeCollectionSlugs.length ? emptyQuery : undefined\n\n  // todo(perf): - collect promises and resolve them in parallel\n  for (const activeCollectionSlug of activeCollectionSlugs) {\n    if (activeCollectionSlug === payload.config.folders.slug) {\n      const folderCollectionConstraints = await buildFolderWhereConstraints({\n        collectionConfig: payload.collections[activeCollectionSlug].config,\n        folderID,\n        localeCode: req?.locale,\n        req,\n        search: typeof req?.query?.search === 'string' ? req.query.search : undefined,\n        sort,\n      })\n\n      if (folderCollectionConstraints) {\n        folderWhere = folderCollectionConstraints\n      }\n\n      folderWhere = combineWhereConstraints([\n        folderWhere,\n        Array.isArray(folderAssignedCollections) &&\n        folderAssignedCollections.length &&\n        payload.config.folders.collectionSpecific\n          ? {\n              or: [\n                {\n                  folderType: {\n                    in: folderAssignedCollections,\n                  },\n                },\n                // if the folderType is not set, it means it accepts all collections and should appear in the results\n                {\n                  folderType: {\n                    exists: false,\n                  },\n                },\n              ],\n            }\n          : undefined,\n      ])\n    } else if ((browseByFolder && folderID) || !browseByFolder) {\n      if (!browseByFolder) {\n        collectionSlug = activeCollectionSlug\n      }\n\n      if (!documentWhere) {\n        documentWhere = {\n          or: [],\n        }\n      }\n\n      const collectionConstraints = await buildFolderWhereConstraints({\n        collectionConfig: payload.collections[activeCollectionSlug].config,\n        folderID,\n        localeCode: req?.locale,\n        req,\n        search: typeof req?.query?.search === 'string' ? req.query.search : undefined,\n        sort,\n      })\n\n      if (collectionConstraints) {\n        documentWhere.or.push(collectionConstraints)\n      }\n    }\n  }\n\n  const folderData = await getFolderData({\n    collectionSlug,\n    documentWhere,\n    folderID,\n    folderWhere,\n    req,\n    sort,\n  })\n\n  let FolderResultsComponent = null\n\n  if (displayAs === 'grid') {\n    FolderResultsComponent = (\n      <div>\n        {folderData.subfolders.length ? (\n          <>\n            <ItemCardGrid items={folderData.subfolders} title={'Folders'} type=\"folder\" />\n          </>\n        ) : null}\n\n        {folderData.documents.length ? (\n          <>\n            <ItemCardGrid\n              items={folderData.documents}\n              subfolderCount={folderData.subfolders.length}\n              title={'Documents'}\n              type=\"file\"\n            />\n          </>\n        ) : null}\n      </div>\n    )\n  } else {\n    FolderResultsComponent = <FolderFileTable showRelationCell={browseByFolder} />\n  }\n\n  return {\n    breadcrumbs: folderData.breadcrumbs,\n    documents: folderData.documents,\n    folderAssignedCollections: folderData.folderAssignedCollections,\n    FolderResultsComponent,\n    subfolders: folderData.subfolders,\n  }\n}\n"],"names":["APIError","formatErrors","getFolderData","buildFolderWhereConstraints","combineWhereConstraints","FolderFileTable","ItemCardGrid","getFolderResultsComponentAndDataHandler","args","req","res","getFolderResultsComponentAndData","err","payload","logger","error","msg","browseByFolder","collectionsToDisplay","activeCollectionSlugs","displayAs","folderAssignedCollections","folderID","undefined","sort","config","folders","emptyQuery","id","exists","collectionSlug","documentWhere","Array","isArray","length","folderWhere","activeCollectionSlug","slug","folderCollectionConstraints","collectionConfig","collections","localeCode","locale","search","query","collectionSpecific","or","folderType","in","collectionConstraints","push","folderData","FolderResultsComponent","_jsxs","subfolders","_jsx","_Fragment","items","title","type","documents","subfolderCount","showRelationCell","breadcrumbs"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 1348, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/providers/TableColumns/buildColumnState/filterFieldsWithPermissions.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/providers/TableColumns/buildColumnState/filterFieldsWithPermissions.tsx"],"sourcesContent":["import type {\n  ClientField,\n  Field,\n  SanitizedFieldPermissions,\n  SanitizedFieldsPermissions,\n} from 'payload'\n\nimport { fieldAffectsData, fieldIsHiddenOrDisabled, fieldIsID } from 'payload/shared'\n\nconst shouldSkipField = (field: ClientField | Field): boolean =>\n  (field.type !== 'ui' && fieldIsHiddenOrDisabled(field) && !fieldIsID(field)) ||\n  field?.admin?.disableListColumn === true\n\nexport const filterFieldsWithPermissions = <T extends ClientField | Field = ClientField>({\n  fieldPermissions,\n  fields,\n}: {\n  fieldPermissions?: SanitizedFieldPermissions | SanitizedFieldsPermissions\n  fields: (ClientField | Field)[]\n}): T[] => {\n  return (fields ?? []).reduce((acc, field) => {\n    if (shouldSkipField(field)) {\n      return acc\n    }\n\n    // handle tabs\n    if (field.type === 'tabs' && 'tabs' in field) {\n      const formattedField = {\n        ...field,\n        tabs: field.tabs.map((tab) => ({\n          ...tab,\n          fields: filterFieldsWithPermissions<T>({\n            fieldPermissions:\n              typeof fieldPermissions === 'boolean'\n                ? fieldPermissions\n                : 'name' in tab && tab.name\n                  ? fieldPermissions[tab.name]?.fields || fieldPermissions[tab.name]\n                  : fieldPermissions,\n            fields: tab.fields,\n          }),\n        })),\n      } as ClientField | Field\n      acc.push(formattedField)\n      return acc\n    }\n\n    // handle fields with subfields (row, group, collapsible, etc.)\n    if ('fields' in field && Array.isArray(field.fields)) {\n      const formattedField = {\n        ...field,\n        fields: filterFieldsWithPermissions<T>({\n          fieldPermissions:\n            typeof fieldPermissions === 'boolean'\n              ? fieldPermissions\n              : 'name' in field && field.name\n                ? fieldPermissions?.[field.name]?.fields || fieldPermissions?.[field.name]\n                : fieldPermissions,\n          fields: field.fields,\n        }),\n      } as ClientField | Field\n      acc.push(formattedField)\n      return acc\n    }\n\n    if (fieldPermissions === true) {\n      acc.push(field)\n      return acc\n    }\n\n    if (fieldAffectsData(field)) {\n      const fieldPermission = fieldPermissions?.[field.name]\n      // Always allow ID fields, or if explicitly granted (true or { read: true })\n      // undefined means field is not in permissions object = denied\n      if (fieldIsID(field) || fieldPermission === true || fieldPermission?.read === true) {\n        acc.push(field)\n      }\n      return acc\n    }\n\n    // leaf\n    acc.push(field)\n    return acc\n  }, [])\n}\n"],"names":["fieldAffectsData","fieldIsHiddenOrDisabled","fieldIsID","shouldSkipField","field","type","admin","disableListColumn","filterFieldsWithPermissions","fieldPermissions","fields","reduce","acc","formattedField","tabs","map","tab","name","push","Array","isArray","fieldPermission","read"],"mappings":";;;;AAOA,SAASA,gBAAgB,EAAEC,uBAAuB,EAAEC,SAAS,QAAQ;;;;;;AAErE,MAAMC,eAAA,IAAmBC,KAAA,GACvBA,KAAC,CAAMC,IAAI,KAAK,YAAQJ,6JAAA,EAAwBG,KAAA,KAAU,KAACF,+IAAA,EAAUE,KAAA,KACrEA,KAAA,EAAOE,KAAA,EAAOC,iBAAA,KAAsB;AAE/B,MAAMC,2BAAA,GAA8BA,CAA8C,EACvFC,gBAAgB,EAChBC,MAAAA,EAID;IACC,OAAO,CAACA,MAAA,IAAU,EAAE,EAAEC,MAAM,CAAC,CAACC,GAAA,EAAKR,KAAA;QACjC,IAAID,eAAA,CAAgBC,KAAA,GAAQ;YAC1B,OAAOQ,GAAA;QACT;QAEA,cAAA;QACA,IAAIR,KAAA,CAAMC,IAAI,KAAK,UAAU,UAAUD,KAAA,EAAO;YAC5C,MAAMS,cAAA,GAAiB;gBACrB,GAAGT,KAAK;gBACRU,IAAA,EAAMV,KAAA,CAAMU,IAAI,CAACC,GAAG,EAAEC,GAAA,GAAA,CAAS;wBAC7B,GAAGA,GAAG;wBACNN,MAAA,EAAQF,2BAAA,CAA+B;4BACrCC,gBAAA,EACE,OAAOA,gBAAA,KAAqB,YACxBA,gBAAA,GACA,UAAUO,GAAA,IAAOA,GAAA,CAAIC,IAAI,GACvBR,gBAAgB,CAACO,GAAA,CAAIC,IAAI,CAAC,EAAEP,MAAA,IAAUD,gBAAgB,CAACO,GAAA,CAAIC,IAAI,CAAC,GAChER,gBAAA;4BACRC,MAAA,EAAQM,GAAA,CAAIN,MAAAA;wBACd;oBACF,CAAA;YACF;YACAE,GAAA,CAAIM,IAAI,CAACL,cAAA;YACT,OAAOD,GAAA;QACT;QAEA,+DAAA;QACA,IAAI,YAAYR,KAAA,IAASe,KAAA,CAAMC,OAAO,CAAChB,KAAA,CAAMM,MAAM,GAAG;YACpD,MAAMG,cAAA,GAAiB;gBACrB,GAAGT,KAAK;gBACRM,MAAA,EAAQF,2BAAA,CAA+B;oBACrCC,gBAAA,EACE,OAAOA,gBAAA,KAAqB,YACxBA,gBAAA,GACA,UAAUL,KAAA,IAASA,KAAA,CAAMa,IAAI,GAC3BR,gBAAA,EAAA,CAAmBL,KAAA,CAAMa,IAAI,CAAC,EAAEP,MAAA,IAAUD,gBAAA,EAAA,CAAmBL,KAAA,CAAMa,IAAI,CAAC,GACxER,gBAAA;oBACRC,MAAA,EAAQN,KAAA,CAAMM,MAAAA;gBAChB;YACF;YACAE,GAAA,CAAIM,IAAI,CAACL,cAAA;YACT,OAAOD,GAAA;QACT;QAEA,IAAIH,gBAAA,KAAqB,MAAM;YAC7BG,GAAA,CAAIM,IAAI,CAACd,KAAA;YACT,OAAOQ,GAAA;QACT;QAEA,IAAIZ,gBAAA,4IAAiBI,KAAA,GAAQ;YAC3B,MAAMiB,eAAA,GAAkBZ,gBAAA,EAAA,CAAmBL,KAAA,CAAMa,IAAI,CAAC;YACtD,4EAAA;YACA,8DAAA;YACA,IAAIf,SAAA,4IAAUE,KAAA,KAAUiB,eAAA,KAAoB,QAAQA,eAAA,EAAiBC,IAAA,KAAS,MAAM;gBAClFV,GAAA,CAAIM,IAAI,CAACd,KAAA;YACX;YACA,OAAOQ,GAAA;QACT;QAEA,OAAA;QACAA,GAAA,CAAIM,IAAI,CAACd,KAAA;QACT,OAAOQ,GAAA;IACT,GAAG,EAAE;AACP","ignoreList":[]}},
    {"offset": {"line": 1416, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/providers/TableColumns/getInitialColumns.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/providers/TableColumns/getInitialColumns.ts"],"sourcesContent":["import type { ClientField, CollectionConfig, CollectionPreferences, Field } from 'payload'\n\nimport { fieldAffectsData } from 'payload/shared'\n\nconst getRemainingColumns = <T extends ClientField[] | Field[]>(\n  fields: T,\n  useAsTitle: string,\n): CollectionPreferences['columns'] =>\n  fields?.reduce((remaining, field) => {\n    if (fieldAffectsData(field) && field.name === useAsTitle) {\n      return remaining\n    }\n\n    if (!fieldAffectsData(field) && 'fields' in field) {\n      return [...remaining, ...getRemainingColumns(field.fields, useAsTitle)]\n    }\n\n    if (field.type === 'tabs' && 'tabs' in field) {\n      return [\n        ...remaining,\n        ...field.tabs.reduce(\n          (tabFieldColumns, tab) => [\n            ...tabFieldColumns,\n            ...('name' in tab ? [tab.name] : getRemainingColumns(tab.fields, useAsTitle)),\n          ],\n          [],\n        ),\n      ]\n    }\n\n    return [...remaining, field.name]\n  }, [])\n\n/**\n * Returns the initial columns to display in the table based on the following criteria:\n * 1. If `defaultColumns` is set in the collection config, use those columns\n * 2. Otherwise take `useAtTitle, if set, and the next 3 fields that are not hidden or disabled\n */\nexport const getInitialColumns = <T extends ClientField[] | Field[]>(\n  fields: T,\n  useAsTitle: CollectionConfig['admin']['useAsTitle'],\n  defaultColumns: CollectionConfig['admin']['defaultColumns'],\n): CollectionPreferences['columns'] => {\n  let initialColumns = []\n\n  if (Array.isArray(defaultColumns) && defaultColumns.length >= 1) {\n    initialColumns = defaultColumns\n  } else {\n    if (useAsTitle) {\n      initialColumns.push(useAsTitle)\n    }\n\n    const remainingColumns = getRemainingColumns(fields, useAsTitle)\n\n    initialColumns = initialColumns.concat(remainingColumns)\n    initialColumns = initialColumns.slice(0, 4)\n  }\n\n  return initialColumns.map((column) => ({\n    accessor: column,\n    active: true,\n  }))\n}\n"],"names":["fieldAffectsData","getRemainingColumns","fields","useAsTitle","reduce","remaining","field","name","type","tabs","tabFieldColumns","tab","getInitialColumns","defaultColumns","initialColumns","Array","isArray","length","push","remainingColumns","concat","slice","map","column","accessor","active"],"mappings":";;;;AAEA,SAASA,gBAAgB,QAAQ;;;;;;AAEjC,MAAMC,mBAAA,GAAsBA,CAC1BC,MAAA,EACAC,UAAA,GAEAD,MAAA,EAAQE,MAAA,CAAO,CAACC,SAAA,EAAWC,KAAA;QACzB,QAAIN,sJAAA,EAAiBM,KAAA,KAAUA,KAAA,CAAMC,IAAI,KAAKJ,UAAA,EAAY;YACxD,OAAOE,SAAA;QACT;QAEA,IAAI,KAACL,sJAAA,EAAiBM,KAAA,KAAU,YAAYA,KAAA,EAAO;YACjD,OAAO,C;mBAAID,SAAA,E;mBAAcJ,mBAAA,CAAoBK,KAAA,CAAMJ,MAAM,EAAEC,UAAA;aAAY;QACzE;QAEA,IAAIG,KAAA,CAAME,IAAI,KAAK,UAAU,UAAUF,KAAA,EAAO;YAC5C,OAAO,C;mBACFD,SAAA,E;mBACAC,KAAA,CAAMG,IAAI,CAACL,MAAM,CAClB,CAACM,eAAA,EAAiBC,GAAA,GAAQ,C;2BACrBD,eAAA,E;2BACC,UAAUC,GAAA,GAAM;4BAACA,GAAA,CAAIJ,IAAI;yBAAC,GAAGN,mBAAA,CAAoBU,GAAA,CAAIT,MAAM,EAAEC,UAAA;qBAClE,EACD,EAAE;aAEL;QACH;QAEA,OAAO,C;eAAIE,SAAA;YAAWC,KAAA,CAAMC,IAAI;SAAC;IACnC,GAAG,EAAE;AAOA,MAAMK,iBAAA,GAAoBA,CAC/BV,MAAA,EACAC,UAAA,EACAU,cAAA;IAEA,IAAIC,cAAA,GAAiB,EAAE;IAEvB,IAAIC,KAAA,CAAMC,OAAO,CAACH,cAAA,KAAmBA,cAAA,CAAeI,MAAM,IAAI,GAAG;QAC/DH,cAAA,GAAiBD,cAAA;IACnB,OAAO;QACL,IAAIV,UAAA,EAAY;YACdW,cAAA,CAAeI,IAAI,CAACf,UAAA;QACtB;QAEA,MAAMgB,gBAAA,GAAmBlB,mBAAA,CAAoBC,MAAA,EAAQC,UAAA;QAErDW,cAAA,GAAiBA,cAAA,CAAeM,MAAM,CAACD,gBAAA;QACvCL,cAAA,GAAiBA,cAAA,CAAeO,KAAK,CAAC,GAAG;IAC3C;IAEA,OAAOP,cAAA,CAAeQ,GAAG,EAAEC,MAAA,GAAA,CAAY;YACrCC,QAAA,EAAUD,MAAA;YACVE,MAAA,EAAQ;QACV,CAAA;AACF","ignoreList":[]}},
    {"offset": {"line": 1476, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/utilities/getColumns.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/utilities/getColumns.ts"],"sourcesContent":["import type { I18nClient } from '@payloadcms/translations'\nimport type {\n  ClientCollectionConfig,\n  ClientConfig,\n  ColumnPreference,\n  SanitizedPermissions,\n} from 'payload'\n\nimport { flattenTopLevelFields } from 'payload'\nimport { fieldAffectsData } from 'payload/shared'\n\nimport { filterFieldsWithPermissions } from '../providers/TableColumns/buildColumnState/filterFieldsWithPermissions.js'\nimport { getInitialColumns } from '../providers/TableColumns/getInitialColumns.js'\n\nexport const getColumns = ({\n  clientConfig,\n  collectionConfig,\n  collectionSlug,\n  columns,\n  i18n,\n  permissions,\n}: {\n  clientConfig: ClientConfig\n  collectionConfig?: ClientCollectionConfig\n  collectionSlug: string | string[]\n  columns: ColumnPreference[]\n  i18n: I18nClient\n  permissions?: SanitizedPermissions\n}) => {\n  const isPolymorphic = Array.isArray(collectionSlug)\n\n  const fields = !isPolymorphic ? (collectionConfig?.fields ?? []) : []\n\n  if (isPolymorphic) {\n    for (const collection of collectionSlug) {\n      const clientCollectionConfig = clientConfig.collections.find(\n        (each) => each.slug === collection,\n      )\n\n      for (const field of filterFieldsWithPermissions({\n        fieldPermissions: permissions?.collections?.[collection]?.fields || true,\n        fields: clientCollectionConfig.fields,\n      })) {\n        if (fieldAffectsData(field)) {\n          if (fields.some((each) => fieldAffectsData(each) && each.name === field.name)) {\n            continue\n          }\n        }\n\n        fields.push(field)\n      }\n    }\n  }\n\n  return columns\n    ? columns?.filter((column) =>\n        flattenTopLevelFields(fields, {\n          i18n,\n          keepPresentationalFields: true,\n          moveSubFieldsToTop: true,\n        })?.some((field) => {\n          const accessor =\n            'accessor' in field ? field.accessor : 'name' in field ? field.name : undefined\n          return accessor === column.accessor\n        }),\n      )\n    : getInitialColumns(\n        isPolymorphic\n          ? fields\n          : filterFieldsWithPermissions({\n              fieldPermissions:\n                typeof collectionSlug === 'string' &&\n                permissions?.collections?.[collectionSlug]?.fields\n                  ? permissions.collections[collectionSlug].fields\n                  : true,\n              fields,\n            }),\n        collectionConfig?.admin?.useAsTitle,\n        isPolymorphic ? [] : collectionConfig?.admin?.defaultColumns,\n      )\n}\n"],"names":["flattenTopLevelFields","fieldAffectsData","filterFieldsWithPermissions","getInitialColumns","getColumns","clientConfig","collectionConfig","collectionSlug","columns","i18n","permissions","isPolymorphic","Array","isArray","fields","collection","clientCollectionConfig","collections","find","each","slug","field","fieldPermissions","some","name","push","filter","column","keepPresentationalFields","moveSubFieldsToTop","accessor","undefined","admin","useAsTitle","defaultColumns"],"mappings":";;;;AAQA,SAASA,qBAAqB,QAAQ;AACtC,SAASC,gBAAgB,QAAQ;AAEjC,SAASC,2BAA2B,QAAQ;AAC5C,SAASC,iBAAiB,QAAQ;;;;;;;;;;;;AAE3B,MAAMC,UAAA,GAAaA,CAAC,EACzBC,YAAY,EACZC,gBAAgB,EAChBC,cAAc,EACdC,OAAO,EACPC,IAAI,EACJC,WAAAA,EAQD;IACC,MAAMC,aAAA,GAAgBC,KAAA,CAAMC,OAAO,CAACN,cAAA;IAEpC,MAAMO,MAAA,GAAS,CAACH,aAAA,GAAiBL,gBAAA,EAAkBQ,MAAA,IAAU,EAAE,GAAI,EAAE;IAErE,IAAIH,aAAA,EAAe;QACjB,KAAK,MAAMI,UAAA,IAAcR,cAAA,CAAgB;YACvC,MAAMS,sBAAA,GAAyBX,YAAA,CAAaY,WAAW,CAACC,IAAI,EACzDC,IAAA,GAASA,IAAA,CAAKC,IAAI,KAAKL,UAAA;YAG1B,KAAK,MAAMM,KAAA,QAASnB,gQAAA,EAA4B;gBAC9CoB,gBAAA,EAAkBZ,WAAA,EAAaO,WAAA,EAAA,CAAcF,UAAA,CAAW,EAAED,MAAA,IAAU;gBACpEA,MAAA,EAAQE,sBAAA,CAAuBF,MAAAA;YACjC,GAAI;gBACF,QAAIb,sJAAA,EAAiBoB,KAAA,GAAQ;oBAC3B,IAAIP,MAAA,CAAOS,IAAI,EAAEJ,IAAA,OAASlB,sJAAA,EAAiBkB,IAAA,KAASA,IAAA,CAAKK,IAAI,KAAKH,KAAA,CAAMG,IAAI,GAAG;wBAC7E;oBACF;gBACF;gBAEAV,MAAA,CAAOW,IAAI,CAACJ,KAAA;YACd;QACF;IACF;IAEA,OAAOb,OAAA,GACHA,OAAA,EAASkB,MAAA,EAAQC,MAAA,OACf3B,uIAAA,EAAsBc,MAAA,EAAQ;YAC5BL,IAAA;YACAmB,wBAAA,EAA0B;YAC1BC,kBAAA,EAAoB;QACtB,IAAIN,IAAA,EAAMF,KAAA;YACR,MAAMS,QAAA,GACJ,cAAcT,KAAA,GAAQA,KAAA,CAAMS,QAAQ,GAAG,UAAUT,KAAA,GAAQA,KAAA,CAAMG,IAAI,GAAGO,SAAA;YACxE,OAAOD,QAAA,KAAaH,MAAA,CAAOG,QAAQ;QACrC,UAEF3B,wNAAA,EACEQ,aAAA,GACIG,MAAA,OACAZ,gQAAA,EAA4B;QAC1BoB,gBAAA,EACE,OAAOf,cAAA,KAAmB,YAC1BG,WAAA,EAAaO,WAAA,EAAA,CAAcV,cAAA,CAAe,EAAEO,MAAA,GACxCJ,WAAA,CAAYO,WAAW,CAACV,cAAA,CAAe,CAACO,MAAM,GAC9C;QACNA;IACF,IACJR,gBAAA,EAAkB0B,KAAA,EAAOC,UAAA,EACzBtB,aAAA,GAAgB,EAAE,GAAGL,gBAAA,EAAkB0B,KAAA,EAAOE,cAAA;AAEtD","ignoreList":[]}},
    {"offset": {"line": 1531, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/providers/TableColumns/buildColumnState/isColumnActive.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/providers/TableColumns/buildColumnState/isColumnActive.ts"],"sourcesContent":["import type { ColumnPreference } from 'payload'\n\nexport function isColumnActive({\n  accessor,\n  activeColumnsIndices,\n  column,\n  columns,\n}: {\n  accessor: string\n  activeColumnsIndices: number[]\n  column: ColumnPreference\n  columns: ColumnPreference[]\n}) {\n  if (column) {\n    return column.active\n  } else if (columns && Array.isArray(columns) && columns.length > 0) {\n    return Boolean(columns.find((col) => col.accessor === accessor)?.active)\n  } else if (activeColumnsIndices.length < 4) {\n    return true\n  }\n\n  return false\n}\n"],"names":["isColumnActive","accessor","activeColumnsIndices","column","columns","active","Array","isArray","length","Boolean","find","col"],"mappings":";;;;AAEO,SAASA,eAAe,EAC7BC,QAAQ,EACRC,oBAAoB,EACpBC,MAAM,EACNC,OAAAA,EAMD;IACC,IAAID,MAAA,EAAQ;QACV,OAAOA,MAAA,CAAOE,MAAM;IACtB,OAAO,IAAID,OAAA,IAAWE,KAAA,CAAMC,OAAO,CAACH,OAAA,KAAYA,OAAA,CAAQI,MAAM,GAAG,GAAG;QAClE,OAAOC,OAAA,CAAQL,OAAA,CAAQM,IAAI,EAAEC,GAAA,GAAQA,GAAA,CAAIV,QAAQ,KAAKA,QAAA,GAAWI,MAAA;IACnE,OAAO,IAAIH,oBAAA,CAAqBM,MAAM,GAAG,GAAG;QAC1C,OAAO;IACT;IAEA,OAAO;AACT","ignoreList":[]}},
    {"offset": {"line": 1549, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/elements/RenderCustomComponent/index.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/elements/RenderCustomComponent/index.tsx"],"sourcesContent":["type Args = {\n  CustomComponent?: React.ReactNode\n  Fallback: React.ReactNode\n}\n\n/**\n * Renders a CustomComponent or a Fallback component.\n * Only fallback if the Custom Component is undefined.\n *\n * If the CustomComponent is null, render null.\n *\n * @param {Object} args - Arguments object.\n * @param {React.ReactNode} [args.CustomComponent] - Optional custom component to render.\n * @param {React.ReactNode} args.Fallback - Fallback component to render if CustomComponent is undefined.\n * @returns {React.ReactNode} Rendered component.\n */\nexport function RenderCustomComponent({ CustomComponent, Fallback }: Args): React.ReactNode {\n  return CustomComponent !== undefined ? CustomComponent : Fallback\n}\n"],"names":["RenderCustomComponent","CustomComponent","Fallback","undefined"],"mappings":"AAKA;;;;;;;;;;GAWA;;;;AAAO,SAASA,sBAAsB,EAAEC,eAAe,EAAEC,QAAAA,EAAgB;IACvE,OAAOD,eAAA,KAAoBE,SAAA,GAAYF,eAAA,GAAkBC,QAAA;AAC3D","ignoreList":[]}},
    {"offset": {"line": 1570, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/utilities/isValidReactElement.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/utilities/isValidReactElement.ts"],"sourcesContent":["import React, { type ReactElement } from 'react'\n\nconst LazyReactComponentSymbol = Symbol.for('react.lazy')\n\n/**\n * Since Next.js 15.4, `React.isValidElement()` returns `false` for components that cross the server-client boundary.\n * This utility expands on that check so that it returns true for valid React elements.\n */\nexport function isValidReactElement<P>(object: {} | null | undefined): object is ReactElement<P> {\n  return React.isValidElement(object) || object?.['$$typeof'] === LazyReactComponentSymbol\n}\n"],"names":["React","LazyReactComponentSymbol","Symbol","for","isValidReactElement","object","isValidElement"],"mappings":";;;;AAAA,OAAOA,KAAA,MAAkC;;AAEzC,MAAMC,wBAAA,GAA2BC,MAAA,CAAOC,GAAG,CAAC;AAMrC,SAASC,oBAAuBC,MAA6B;IAClE,OAAOL,uNAAA,CAAMM,cAAc,CAACD,MAAA,KAAWA,MAAA,EAAA,CAAS,WAAW,KAAKJ,wBAAA;AAClE","ignoreList":[]}},
    {"offset": {"line": 1584, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/utilities/hasOptionLabelJSXElement.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/utilities/hasOptionLabelJSXElement.ts"],"sourcesContent":["import type { DefaultCellComponentProps } from 'payload'\n\nimport { isValidReactElement } from './isValidReactElement.js'\n\nexport const hasOptionLabelJSXElement = (cellClientProps: DefaultCellComponentProps) => {\n  const { cellData, field } = cellClientProps\n\n  if ((field?.type === 'select' || field?.type == 'radio') && Array.isArray(field?.options)) {\n    const matchingOption = field.options.find(\n      (option) => typeof option === 'object' && option.value === cellData,\n    )\n\n    if (\n      matchingOption &&\n      typeof matchingOption === 'object' &&\n      isValidReactElement(matchingOption.label)\n    ) {\n      return true\n    }\n  }\n\n  return false\n}\n"],"names":["isValidReactElement","hasOptionLabelJSXElement","cellClientProps","cellData","field","type","Array","isArray","options","matchingOption","find","option","value","label"],"mappings":";;;;AAEA,SAASA,mBAAmB,QAAQ;;AAE7B,MAAMC,wBAAA,IAA4BC,eAAA;IACvC,MAAM,EAAEC,QAAQ,EAAEC,KAAAA,EAAO,GAAGF,eAAA;IAE5B,IAAI,CAACE,KAAA,EAAOC,IAAA,KAAS,YAAYD,KAAA,EAAOC,IAAA,IAAQ,OAAM,KAAMC,KAAA,CAAMC,OAAO,CAACH,KAAA,EAAOI,OAAA,GAAU;QACzF,MAAMC,cAAA,GAAiBL,KAAA,CAAMI,OAAO,CAACE,IAAI,EACtCC,MAAA,GAAW,OAAOA,MAAA,KAAW,YAAYA,MAAA,CAAOC,KAAK,KAAKT,QAAA;QAG7D,IACEM,cAAA,IACA,OAAOA,cAAA,KAAmB,gBAC1BT,4MAAA,EAAoBS,cAAA,CAAeI,KAAK,GACxC;YACA,OAAO;QACT;IACF;IAEA,OAAO;AACT","ignoreList":[]}},
    {"offset": {"line": 1604, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/providers/TableColumns/buildColumnState/findValueFromPath.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/providers/TableColumns/buildColumnState/findValueFromPath.ts"],"sourcesContent":["/**\n * Safely resolves a deeply nested value from a document using dot-notation accessor paths.\n *\n * Used in list views to retrieve field values, especially for fields hoisted from nested structures\n * like groups, where the accessor may be in the form of `group.someField`.\n *\n * @param doc - The document object to retrieve the value from.\n * @param path - A dot-separated accessor string (e.g., \"group.someField\").\n * @returns The resolved value at the specified path, or undefined if any segment is missing.\n */\nexport const findValueFromPath = (doc: Record<string, any>, path: string): any => {\n  return path.split('.').reduce((acc, key) => acc?.[key], doc)\n}\n"],"names":["findValueFromPath","doc","path","split","reduce","acc","key"],"mappings":"AAAA;;;;;;;;;GAUA;;;;AAAO,MAAMA,iBAAA,GAAoBA,CAACC,GAAA,EAA0BC,IAAA;IAC1D,OAAOA,IAAA,CAAKC,KAAK,CAAC,KAAKC,MAAM,CAAC,CAACC,GAAA,EAAKC,GAAA,GAAQD,GAAA,EAAA,CAAMC,GAAA,CAAI,EAAEL,GAAA;AAC1D","ignoreList":[]}},
    {"offset": {"line": 1626, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/providers/TableColumns/buildColumnState/renderCell.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/providers/TableColumns/buildColumnState/renderCell.tsx"],"sourcesContent":["import type { I18nClient } from '@payloadcms/translations'\nimport type {\n  ClientField,\n  DefaultCellComponentProps,\n  DefaultServerCellComponentProps,\n  Document,\n  Field,\n  Payload,\n  PayloadRequest,\n  ViewTypes,\n} from 'payload'\n\nimport { MissingEditorProp } from 'payload'\nimport { formatAdminURL } from 'payload/shared'\n\nimport { RenderCustomComponent } from '../../../elements/RenderCustomComponent/index.js'\nimport { RenderServerComponent } from '../../../elements/RenderServerComponent/index.js'\nimport {\n  DefaultCell,\n  RenderDefaultCell,\n  // eslint-disable-next-line payload/no-imports-from-exports-dir -- MUST reference the exports dir: https://github.com/payloadcms/payload/issues/12002#issuecomment-2791493587\n} from '../../../exports/client/index.js'\nimport { hasOptionLabelJSXElement } from '../../../utilities/hasOptionLabelJSXElement.js'\nimport { findValueFromPath } from './findValueFromPath.js'\n\ntype RenderCellArgs = {\n  readonly clientField: ClientField\n  readonly collectionSlug: string\n  readonly columnIndex: number\n  readonly customCellProps: DefaultCellComponentProps['customCellProps']\n  readonly doc: Document\n  readonly enableRowSelections: boolean\n  readonly i18n: I18nClient\n  readonly isLinkedColumn: boolean\n  readonly payload: Payload\n  readonly req?: PayloadRequest\n  readonly rowIndex: number\n  readonly serverField: Field\n  readonly viewType?: ViewTypes\n}\nexport function renderCell({\n  clientField,\n  collectionSlug,\n  columnIndex,\n  customCellProps,\n  doc,\n  enableRowSelections,\n  i18n,\n  isLinkedColumn,\n  payload,\n  req,\n  rowIndex,\n  serverField,\n  viewType,\n}: RenderCellArgs) {\n  const baseCellClientProps: DefaultCellComponentProps = {\n    cellData: undefined,\n    collectionSlug,\n    customCellProps,\n    field: clientField,\n    rowData: undefined,\n    viewType,\n  }\n\n  const accessor: string | undefined =\n    ('accessor' in clientField ? (clientField.accessor as string) : undefined) ??\n    ('name' in clientField ? clientField.name : undefined)\n\n  // Check if there's a custom formatDocURL function for this linked column\n  let shouldLink = isLinkedColumn\n  let customLinkURL: string | undefined\n\n  if (isLinkedColumn && req) {\n    const collectionConfig = payload.collections[collectionSlug]?.config\n    const formatDocURL = collectionConfig?.admin?.formatDocURL\n\n    if (typeof formatDocURL === 'function') {\n      // Generate the default URL that would normally be used\n      const adminRoute = req.payload.config.routes?.admin || '/admin'\n      const defaultURL = formatAdminURL({\n        adminRoute,\n        path: `/collections/${collectionSlug}${viewType === 'trash' ? '/trash' : ''}/${encodeURIComponent(String(doc.id))}`,\n      })\n\n      const customURL = formatDocURL({\n        collectionSlug,\n        defaultURL,\n        doc,\n        req,\n        viewType,\n      })\n\n      if (customURL === null) {\n        // formatDocURL returned null = disable linking entirely\n        shouldLink = false\n      } else if (typeof customURL === 'string') {\n        // formatDocURL returned a string = use custom URL\n        shouldLink = true\n        customLinkURL = customURL\n      } else {\n        // formatDocURL returned unexpected type = disable linking for safety\n        shouldLink = false\n      }\n    }\n  }\n\n  // For _status field, use _displayStatus if available (for showing \"changed\" status in list view)\n  const cellData =\n    'name' in clientField && accessor === '_status' && '_displayStatus' in doc\n      ? doc._displayStatus\n      : 'name' in clientField\n        ? findValueFromPath(doc, accessor)\n        : undefined\n\n  // For _status field, add 'changed' option for display purposes\n  // The 'changed' status is computed at runtime\n  let enrichedClientField = clientField\n  if ('name' in clientField && accessor === '_status' && clientField.type === 'select') {\n    const hasChangedOption = clientField.options?.some(\n      (opt) => (typeof opt === 'object' ? opt.value : opt) === 'changed',\n    )\n    if (!hasChangedOption) {\n      enrichedClientField = {\n        ...clientField,\n        options: [\n          ...(clientField.options || []),\n          {\n            label: i18n.t('version:draftHasPublishedVersion'),\n            value: 'changed',\n          },\n        ],\n      }\n    }\n  }\n\n  const cellClientProps: DefaultCellComponentProps = {\n    ...baseCellClientProps,\n    cellData,\n    field: enrichedClientField,\n    link: shouldLink,\n    linkURL: customLinkURL,\n    rowData: doc,\n  }\n\n  const cellServerProps: DefaultServerCellComponentProps = {\n    cellData: cellClientProps.cellData,\n    className: baseCellClientProps.className,\n    collectionConfig: payload.collections[collectionSlug].config,\n    collectionSlug,\n    columnIndex,\n    customCellProps: baseCellClientProps.customCellProps,\n    field: serverField,\n    i18n,\n    link: shouldLink,\n    linkURL: customLinkURL,\n    onClick: baseCellClientProps.onClick,\n    payload,\n    rowData: doc,\n  }\n\n  let CustomCell = null\n\n  if (serverField?.type === 'richText') {\n    if (!serverField?.editor) {\n      throw new MissingEditorProp(serverField) // while we allow disabling editor functionality, you should not have any richText fields defined if you do not have an editor\n    }\n\n    if (typeof serverField?.editor === 'function') {\n      throw new Error('Attempted to access unsanitized rich text editor.')\n    }\n\n    if (!serverField.admin) {\n      serverField.admin = {}\n    }\n\n    if (!serverField.admin.components) {\n      serverField.admin.components = {}\n    }\n\n    CustomCell = RenderServerComponent({\n      clientProps: cellClientProps,\n      Component: serverField.editor.CellComponent,\n      importMap: payload.importMap,\n      serverProps: cellServerProps,\n    })\n  } else {\n    const CustomCellComponent = serverField?.admin?.components?.Cell\n\n    if (CustomCellComponent) {\n      CustomCell = RenderServerComponent({\n        clientProps: cellClientProps,\n        Component: CustomCellComponent,\n        importMap: payload.importMap,\n        serverProps: cellServerProps,\n      })\n    } else if (\n      cellClientProps.cellData &&\n      cellClientProps.field &&\n      hasOptionLabelJSXElement(cellClientProps)\n    ) {\n      CustomCell = RenderServerComponent({\n        clientProps: cellClientProps,\n        Component: DefaultCell,\n        importMap: payload.importMap,\n      })\n    } else {\n      const CustomCellComponent = serverField?.admin?.components?.Cell\n\n      if (CustomCellComponent) {\n        CustomCell = RenderServerComponent({\n          clientProps: cellClientProps,\n          Component: CustomCellComponent,\n          importMap: payload.importMap,\n          serverProps: cellServerProps,\n        })\n      } else {\n        CustomCell = undefined\n      }\n    }\n  }\n\n  return (\n    <RenderCustomComponent\n      CustomComponent={CustomCell}\n      Fallback={\n        <RenderDefaultCell\n          clientProps={cellClientProps}\n          columnIndex={columnIndex}\n          enableRowSelections={enableRowSelections}\n          isLinkedColumn={isLinkedColumn}\n        />\n      }\n      key={`${rowIndex}-${columnIndex}`}\n    />\n  )\n}\n"],"names":["MissingEditorProp","formatAdminURL","RenderCustomComponent","RenderServerComponent","DefaultCell","RenderDefaultCell","hasOptionLabelJSXElement","findValueFromPath","renderCell","clientField","collectionSlug","columnIndex","customCellProps","doc","enableRowSelections","i18n","isLinkedColumn","payload","req","rowIndex","serverField","viewType","baseCellClientProps","cellData","undefined","field","rowData","accessor","name","shouldLink","customLinkURL","collectionConfig","collections","config","formatDocURL","admin","adminRoute","routes","defaultURL","path","encodeURIComponent","String","id","customURL","_displayStatus","enrichedClientField","type","hasChangedOption","options","some","opt","value","label","t","cellClientProps","link","linkURL","cellServerProps","className","onClick","CustomCell","editor","Error","components","clientProps","Component","CellComponent","importMap","serverProps","CustomCellComponent","Cell","_jsx","CustomComponent","Fallback"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 1803, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/providers/TableColumns/buildColumnState/sortFieldMap.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/providers/TableColumns/buildColumnState/sortFieldMap.ts"],"sourcesContent":["import type { ClientField, ColumnPreference, Field } from 'payload'\n\nfunction getAccessor(field) {\n  return field.accessor ?? ('name' in field ? field.name : undefined)\n}\n\nexport function sortFieldMap<T extends ClientField | Field>(\n  fieldMap: T[],\n  sortTo: ColumnPreference[],\n): T[] {\n  return fieldMap?.sort((a, b) => {\n    const aIndex = sortTo.findIndex((column) => 'name' in a && column.accessor === getAccessor(a))\n    const bIndex = sortTo.findIndex((column) => 'name' in b && column.accessor === getAccessor(b))\n\n    if (aIndex === -1 && bIndex === -1) {\n      return 0\n    }\n\n    if (aIndex === -1) {\n      return 1\n    }\n\n    if (bIndex === -1) {\n      return -1\n    }\n\n    return aIndex - bIndex\n  })\n}\n"],"names":["getAccessor","field","accessor","name","undefined","sortFieldMap","fieldMap","sortTo","sort","a","b","aIndex","findIndex","column","bIndex"],"mappings":";;;;AAEA,SAASA,YAAYC,KAAK;IACxB,OAAOA,KAAA,CAAMC,QAAQ,IAAA,CAAK,UAAUD,KAAA,GAAQA,KAAA,CAAME,IAAI,GAAGC,SAAQ;AACnE;AAEO,SAASC,aACdC,QAAa,EACbC,MAA0B;IAE1B,OAAOD,QAAA,EAAUE,IAAA,CAAK,CAACC,CAAA,EAAGC,CAAA;QACxB,MAAMC,MAAA,GAASJ,MAAA,CAAOK,SAAS,EAAEC,MAAA,GAAW,UAAUJ,CAAA,IAAKI,MAAA,CAAOX,QAAQ,KAAKF,WAAA,CAAYS,CAAA;QAC3F,MAAMK,MAAA,GAASP,MAAA,CAAOK,SAAS,EAAEC,MAAA,GAAW,UAAUH,CAAA,IAAKG,MAAA,CAAOX,QAAQ,KAAKF,WAAA,CAAYU,CAAA;QAE3F,IAAIC,MAAA,KAAW,CAAC,KAAKG,MAAA,KAAW,CAAC,GAAG;YAClC,OAAO;QACT;QAEA,IAAIH,MAAA,KAAW,CAAC,GAAG;YACjB,OAAO;QACT;QAEA,IAAIG,MAAA,KAAW,CAAC,GAAG;YACjB,OAAO,CAAC;QACV;QAEA,OAAOH,MAAA,GAASG,MAAA;IAClB;AACF","ignoreList":[]}},
    {"offset": {"line": 1832, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/providers/TableColumns/buildColumnState/index.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/providers/TableColumns/buildColumnState/index.tsx"],"sourcesContent":["import type { I18nClient } from '@payloadcms/translations'\nimport type {\n  ClientComponentProps,\n  ClientField,\n  CollectionPreferences,\n  CollectionSlug,\n  Column,\n  DefaultCellComponentProps,\n  Document,\n  Field,\n  PaginatedDocs,\n  Payload,\n  PayloadRequest,\n  SanitizedCollectionConfig,\n  SanitizedFieldsPermissions,\n  ServerComponentProps,\n  StaticLabel,\n  ViewTypes,\n} from 'payload'\n\nimport {\n  fieldIsHiddenOrDisabled,\n  fieldIsID,\n  fieldIsPresentationalOnly,\n  flattenTopLevelFields,\n} from 'payload/shared'\nimport React from 'react'\n\nimport type { SortColumnProps } from '../../../elements/SortColumn/index.js'\n\nimport { RenderServerComponent } from '../../../elements/RenderServerComponent/index.js'\nimport {\n  SortColumn,\n  // eslint-disable-next-line payload/no-imports-from-exports-dir -- MUST reference the exports dir: https://github.com/payloadcms/payload/issues/12002#issuecomment-2791493587\n} from '../../../exports/client/index.js'\nimport { filterFieldsWithPermissions } from './filterFieldsWithPermissions.js'\nimport { isColumnActive } from './isColumnActive.js'\nimport { renderCell } from './renderCell.js'\nimport { sortFieldMap } from './sortFieldMap.js'\n\nexport type BuildColumnStateArgs = {\n  beforeRows?: Column[]\n  clientFields: ClientField[]\n  columns?: CollectionPreferences['columns']\n  customCellProps: DefaultCellComponentProps['customCellProps']\n  enableLinkedCell?: boolean\n  enableRowSelections: boolean\n  enableRowTypes?: boolean\n  fieldPermissions?: SanitizedFieldsPermissions\n  i18n: I18nClient\n  payload: Payload\n  req?: PayloadRequest\n  serverFields: Field[]\n  sortColumnProps?: Partial<SortColumnProps>\n  useAsTitle: SanitizedCollectionConfig['admin']['useAsTitle']\n  viewType?: ViewTypes\n} & (\n  | {\n      collectionSlug: CollectionSlug\n      dataType: 'monomorphic'\n      docs: PaginatedDocs['docs']\n    }\n  | {\n      collectionSlug?: undefined\n      dataType: 'polymorphic'\n      docs: {\n        relationTo: CollectionSlug\n        value: Document\n      }[]\n    }\n)\n\nexport const buildColumnState = (args: BuildColumnStateArgs): Column[] => {\n  const {\n    beforeRows,\n    clientFields,\n    collectionSlug,\n    columns,\n    customCellProps,\n    dataType,\n    docs,\n    enableLinkedCell = true,\n    enableRowSelections,\n    fieldPermissions,\n    i18n,\n    payload,\n    req,\n    serverFields,\n    sortColumnProps,\n    useAsTitle,\n    viewType,\n  } = args\n\n  // clientFields contains the fake `id` column\n  let sortedFieldMap = flattenTopLevelFields(\n    filterFieldsWithPermissions({ fieldPermissions, fields: clientFields }),\n    {\n      i18n,\n      keepPresentationalFields: true,\n      moveSubFieldsToTop: true,\n    },\n  ) as ClientField[]\n\n  let _sortedFieldMap = flattenTopLevelFields(\n    filterFieldsWithPermissions({\n      fieldPermissions,\n      fields: serverFields,\n    }),\n    {\n      i18n,\n      keepPresentationalFields: true,\n      moveSubFieldsToTop: true,\n    },\n  ) as Field[] // TODO: think of a way to avoid this additional flatten\n\n  // place the `ID` field first, if it exists\n  // do the same for the `useAsTitle` field with precedence over the `ID` field\n  // then sort the rest of the fields based on the `defaultColumns` or `columns`\n  const idFieldIndex = sortedFieldMap?.findIndex((field) => fieldIsID(field))\n\n  if (idFieldIndex > -1) {\n    const idField = sortedFieldMap.splice(idFieldIndex, 1)[0]\n    sortedFieldMap.unshift(idField)\n  }\n\n  const useAsTitleFieldIndex = useAsTitle\n    ? sortedFieldMap.findIndex((field) => 'name' in field && field.name === useAsTitle)\n    : -1\n\n  if (useAsTitleFieldIndex > -1) {\n    const useAsTitleField = sortedFieldMap.splice(useAsTitleFieldIndex, 1)[0]\n    sortedFieldMap.unshift(useAsTitleField)\n  }\n\n  const sortTo = columns\n\n  if (sortTo) {\n    // sort the fields to the order of `defaultColumns` or `columns`\n    sortedFieldMap = sortFieldMap<ClientField>(sortedFieldMap, sortTo)\n    _sortedFieldMap = sortFieldMap<Field>(_sortedFieldMap, sortTo) // TODO: think of a way to avoid this additional sort\n  }\n\n  const activeColumnsIndices = []\n\n  const sorted: Column[] = sortedFieldMap?.reduce((acc, clientField, colIndex) => {\n    if (fieldIsHiddenOrDisabled(clientField) && !fieldIsID(clientField)) {\n      return acc\n    }\n\n    const accessor =\n      (clientField as any).accessor ?? ('name' in clientField ? clientField.name : undefined)\n\n    const serverField = _sortedFieldMap.find((f) => {\n      const fAccessor = (f as any).accessor ?? ('name' in f ? f.name : undefined)\n      return fAccessor === accessor\n    })\n\n    const hasCustomCell =\n      serverField?.admin &&\n      'components' in serverField.admin &&\n      serverField.admin.components &&\n      'Cell' in serverField.admin.components &&\n      serverField.admin.components.Cell\n\n    if (serverField && serverField.type === 'group' && !hasCustomCell) {\n      return acc // skip any group without a custom cell\n    }\n\n    const columnPref = columns?.find(\n      (preference) => clientField && 'name' in clientField && preference.accessor === accessor,\n    )\n\n    const isActive = isColumnActive({\n      accessor,\n      activeColumnsIndices,\n      column: columnPref,\n      columns,\n    })\n\n    if (isActive && !activeColumnsIndices.includes(colIndex)) {\n      activeColumnsIndices.push(colIndex)\n    }\n\n    let CustomLabel = undefined\n\n    if (dataType === 'monomorphic') {\n      const CustomLabelToRender =\n        serverField &&\n        'admin' in serverField &&\n        'components' in serverField.admin &&\n        'Label' in serverField.admin.components &&\n        serverField.admin.components.Label !== undefined // let it return `null`\n          ? serverField.admin.components.Label\n          : undefined\n\n      // TODO: customComponent will be optional in v4\n      const clientProps: Omit<ClientComponentProps, 'customComponents'> = {\n        field: clientField,\n      }\n\n      const customLabelServerProps: Pick<\n        ServerComponentProps,\n        'clientField' | 'collectionSlug' | 'field' | 'i18n' | 'payload'\n      > = {\n        clientField,\n        collectionSlug,\n        field: serverField,\n        i18n,\n        payload,\n      }\n\n      CustomLabel = CustomLabelToRender\n        ? RenderServerComponent({\n            clientProps,\n            Component: CustomLabelToRender,\n            importMap: payload.importMap,\n            serverProps: customLabelServerProps,\n          })\n        : undefined\n    }\n\n    const fieldAffectsDataSubFields =\n      clientField &&\n      clientField.type &&\n      (clientField.type === 'array' ||\n        clientField.type === 'group' ||\n        clientField.type === 'blocks')\n\n    const label =\n      clientField && 'labelWithPrefix' in clientField && clientField.labelWithPrefix !== undefined\n        ? clientField.labelWithPrefix\n        : 'label' in clientField\n          ? clientField.label\n          : undefined\n\n    // Convert accessor to dot notation specifically for SortColumn sorting behavior\n    const dotAccessor = accessor?.replace(/-/g, '.')\n\n    const Heading = (\n      <SortColumn\n        disable={fieldAffectsDataSubFields || fieldIsPresentationalOnly(clientField) || undefined}\n        Label={CustomLabel}\n        label={label as StaticLabel}\n        name={dotAccessor}\n        {...(sortColumnProps || {})}\n      />\n    )\n\n    const column: Column = {\n      accessor,\n      active: isActive,\n      CustomLabel,\n      field: clientField,\n      Heading,\n      renderedCells: isActive\n        ? docs.map((doc, rowIndex) => {\n            return renderCell({\n              clientField,\n              collectionSlug: dataType === 'monomorphic' ? collectionSlug : doc.relationTo,\n              columnIndex: colIndex,\n              customCellProps,\n              doc: dataType === 'monomorphic' ? doc : doc.value,\n              enableRowSelections,\n              i18n,\n              isLinkedColumn: enableLinkedCell && colIndex === activeColumnsIndices[0],\n              payload,\n              req,\n              rowIndex,\n              serverField,\n              viewType,\n            })\n          })\n        : [],\n    }\n\n    acc.push(column)\n\n    return acc\n  }, [])\n\n  if (beforeRows) {\n    sorted.unshift(...beforeRows)\n  }\n\n  return sorted\n}\n"],"names":["fieldIsHiddenOrDisabled","fieldIsID","fieldIsPresentationalOnly","flattenTopLevelFields","React","RenderServerComponent","SortColumn","filterFieldsWithPermissions","isColumnActive","renderCell","sortFieldMap","buildColumnState","args","beforeRows","clientFields","collectionSlug","columns","customCellProps","dataType","docs","enableLinkedCell","enableRowSelections","fieldPermissions","i18n","payload","req","serverFields","sortColumnProps","useAsTitle","viewType","sortedFieldMap","fields","keepPresentationalFields","moveSubFieldsToTop","_sortedFieldMap","idFieldIndex","findIndex","field","idField","splice","unshift","useAsTitleFieldIndex","name","useAsTitleField","sortTo","activeColumnsIndices","sorted","reduce","acc","clientField","colIndex","accessor","undefined","serverField","find","f","fAccessor","hasCustomCell","admin","components","Cell","type","columnPref","preference","isActive","column","includes","push","CustomLabel","CustomLabelToRender","Label","clientProps","customLabelServerProps","Component","importMap","serverProps","fieldAffectsDataSubFields","label","labelWithPrefix","dotAccessor","replace","Heading","_jsx","disable","active","renderedCells","map","doc","rowIndex","relationTo","columnIndex","value","isLinkedColumn"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 1998, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/utilities/renderTable.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/utilities/renderTable.tsx"],"sourcesContent":["import type {\n  ClientCollectionConfig,\n  ClientConfig,\n  ClientField,\n  CollectionConfig,\n  Column,\n  ColumnPreference,\n  Field,\n  ImportMap,\n  ListQuery,\n  PaginatedDocs,\n  Payload,\n  PayloadRequest,\n  SanitizedCollectionConfig,\n  SanitizedFieldsPermissions,\n  ViewTypes,\n} from 'payload'\n\nimport { getTranslation, type I18nClient } from '@payloadcms/translations'\nimport { fieldAffectsData, fieldIsHiddenOrDisabled } from 'payload/shared'\nimport React from 'react'\n\nimport type { BuildColumnStateArgs } from '../providers/TableColumns/buildColumnState/index.js'\n\nimport { RenderServerComponent } from '../elements/RenderServerComponent/index.js'\nimport {\n  GroupByHeader,\n  GroupByPageControls,\n  OrderableTable,\n  Pill,\n  SelectAll,\n  SelectionProvider,\n  SelectRow,\n  SortHeader,\n  SortRow,\n  Table,\n  // eslint-disable-next-line payload/no-imports-from-exports-dir -- these MUST reference the exports dir: https://github.com/payloadcms/payload/issues/12002#issuecomment-2791493587\n} from '../exports/client/index.js'\nimport { filterFieldsWithPermissions } from '../providers/TableColumns/buildColumnState/filterFieldsWithPermissions.js'\nimport { buildColumnState } from '../providers/TableColumns/buildColumnState/index.js'\n\nexport const renderFilters = (\n  fields: Field[],\n  importMap: ImportMap,\n): Map<string, React.ReactNode> =>\n  fields.reduce(\n    (acc, field) => {\n      if (fieldIsHiddenOrDisabled(field)) {\n        return acc\n      }\n\n      if ('name' in field && field.admin?.components?.Filter) {\n        acc.set(\n          field.name,\n          RenderServerComponent({\n            Component: field.admin.components?.Filter,\n            importMap,\n          }),\n        )\n      }\n\n      return acc\n    },\n    new Map() as Map<string, React.ReactNode>,\n  )\n\nexport const renderTable = ({\n  clientCollectionConfig,\n  clientConfig,\n  collectionConfig,\n  collections,\n  columns,\n  customCellProps,\n  data,\n  enableRowSelections,\n  fieldPermissions,\n  groupByFieldPath,\n  groupByValue,\n  heading,\n  i18n,\n  key = 'table',\n  orderableFieldName,\n  payload,\n  query,\n  renderRowTypes,\n  req,\n  tableAppearance,\n  useAsTitle,\n  viewType,\n}: {\n  clientCollectionConfig?: ClientCollectionConfig\n  clientConfig?: ClientConfig\n  collectionConfig?: SanitizedCollectionConfig\n  collections?: string[]\n  columns: ColumnPreference[]\n  customCellProps?: Record<string, unknown>\n  data?: PaginatedDocs | undefined\n  drawerSlug?: string\n  enableRowSelections: boolean\n  fieldPermissions?: SanitizedFieldsPermissions\n  groupByFieldPath?: string\n  groupByValue?: string\n  heading?: string\n  i18n: I18nClient\n  key?: string\n  orderableFieldName: string\n  payload: Payload\n  query?: ListQuery\n  renderRowTypes?: boolean\n  req?: PayloadRequest\n  tableAppearance?: 'condensed' | 'default'\n  useAsTitle: CollectionConfig['admin']['useAsTitle']\n  viewType?: ViewTypes\n}): {\n  columnState: Column[]\n  Table: React.ReactNode\n} => {\n  // Ensure that columns passed as args comply with the field config, i.e. `hidden`, `disableListColumn`, etc.\n\n  let columnState: Column[]\n  let clientFields: ClientField[] = clientCollectionConfig?.fields || []\n  let serverFields: Field[] = collectionConfig?.fields || []\n  const isPolymorphic = collections\n\n  const isGroupingBy = Boolean(collectionConfig?.admin?.groupBy && query?.groupBy)\n\n  if (isPolymorphic) {\n    clientFields = []\n    serverFields = []\n\n    for (const collection of collections) {\n      const clientCollectionConfig = clientConfig.collections.find(\n        (each) => each.slug === collection,\n      )\n\n      for (const field of filterFieldsWithPermissions({\n        fieldPermissions,\n        fields: clientCollectionConfig.fields,\n      })) {\n        if (fieldAffectsData(field)) {\n          if (clientFields.some((each) => fieldAffectsData(each) && each.name === field.name)) {\n            continue\n          }\n        }\n\n        clientFields.push(field)\n      }\n\n      const serverCollectionConfig = payload.collections[collection].config\n\n      for (const field of filterFieldsWithPermissions<Field>({\n        fieldPermissions,\n        fields: serverCollectionConfig.fields,\n      })) {\n        if (fieldAffectsData(field)) {\n          if (serverFields.some((each) => fieldAffectsData(each) && each.name === field.name)) {\n            continue\n          }\n        }\n\n        serverFields.push(field)\n      }\n    }\n  }\n\n  const sharedArgs: Pick<\n    BuildColumnStateArgs,\n    | 'clientFields'\n    | 'columns'\n    | 'customCellProps'\n    | 'enableRowSelections'\n    | 'fieldPermissions'\n    | 'i18n'\n    | 'payload'\n    | 'req'\n    | 'serverFields'\n    | 'useAsTitle'\n    | 'viewType'\n  > = {\n    clientFields,\n    columns,\n    enableRowSelections,\n    fieldPermissions,\n    i18n,\n    // sortColumnProps,\n    customCellProps,\n    payload,\n    req,\n    serverFields,\n    useAsTitle,\n    viewType,\n  }\n\n  if (isPolymorphic) {\n    columnState = buildColumnState({\n      ...sharedArgs,\n      collectionSlug: undefined,\n      dataType: 'polymorphic',\n      docs: data?.docs || [],\n    })\n  } else {\n    columnState = buildColumnState({\n      ...sharedArgs,\n      collectionSlug: clientCollectionConfig.slug,\n      dataType: 'monomorphic',\n      docs: data?.docs || [],\n    })\n  }\n\n  const columnsToUse = [...columnState]\n\n  if (renderRowTypes) {\n    columnsToUse.unshift({\n      accessor: 'collection',\n      active: true,\n      field: {\n        admin: {\n          disabled: true,\n        },\n        hidden: true,\n      },\n      Heading: i18n.t('version:type'),\n      renderedCells: (data?.docs || []).map((doc, i) => (\n        <Pill key={i} size=\"small\">\n          {getTranslation(\n            collections\n              ? payload.collections[doc.relationTo].config.labels.singular\n              : clientCollectionConfig.labels.singular,\n            i18n,\n          )}\n        </Pill>\n      )),\n    } as Column)\n  }\n\n  if (enableRowSelections) {\n    columnsToUse.unshift({\n      accessor: '_select',\n      active: true,\n      field: {\n        admin: {\n          disabled: true,\n        },\n        hidden: true,\n      },\n      Heading: <SelectAll />,\n      renderedCells: (data?.docs || []).map((_, i) => (\n        <SelectRow key={i} rowData={data?.docs[i]} />\n      )),\n    } as Column)\n  }\n\n  if (isGroupingBy) {\n    return {\n      columnState,\n      // key is required since Next.js 15.2.0 to prevent React key error\n      Table: (\n        <div\n          className={['table-wrap', groupByValue !== undefined && `table-wrap--group-by`]\n            .filter(Boolean)\n            .join(' ')}\n          key={key}\n        >\n          <SelectionProvider docs={data?.docs || []} totalDocs={data?.totalDocs || 0}>\n            <GroupByHeader\n              collectionConfig={clientCollectionConfig}\n              groupByFieldPath={groupByFieldPath}\n              groupByValue={groupByValue}\n              heading={heading}\n            />\n            <Table appearance={tableAppearance} columns={columnsToUse} data={data?.docs || []} />\n            <GroupByPageControls\n              collectionConfig={clientCollectionConfig}\n              data={data}\n              groupByValue={groupByValue}\n            />\n          </SelectionProvider>\n        </div>\n      ),\n    }\n  }\n\n  if (!orderableFieldName) {\n    return {\n      columnState,\n      // key is required since Next.js 15.2.0 to prevent React key error\n      Table: (\n        <div className=\"table-wrap\" key={key}>\n          <Table appearance={tableAppearance} columns={columnsToUse} data={data?.docs || []} />\n        </div>\n      ),\n    }\n  }\n\n  columnsToUse.unshift({\n    accessor: '_dragHandle',\n    active: true,\n    field: {\n      admin: {\n        disabled: true,\n      },\n      hidden: true,\n    },\n    Heading: <SortHeader />,\n    renderedCells: (data?.docs || []).map((_, i) => <SortRow key={i} />),\n  } as Column)\n\n  return {\n    columnState,\n    // key is required since Next.js 15.2.0 to prevent React key error\n    Table: (\n      <div className=\"table-wrap\" key={key}>\n        <OrderableTable\n          appearance={tableAppearance}\n          collection={clientCollectionConfig}\n          columns={columnsToUse}\n          data={data?.docs || []}\n        />\n      </div>\n    ),\n  }\n}\n"],"names":["getTranslation","fieldAffectsData","fieldIsHiddenOrDisabled","React","RenderServerComponent","GroupByHeader","GroupByPageControls","OrderableTable","Pill","SelectAll","SelectionProvider","SelectRow","SortHeader","SortRow","Table","filterFieldsWithPermissions","buildColumnState","renderFilters","fields","importMap","reduce","acc","field","admin","components","Filter","set","name","Component","Map","renderTable","clientCollectionConfig","clientConfig","collectionConfig","collections","columns","customCellProps","data","enableRowSelections","fieldPermissions","groupByFieldPath","groupByValue","heading","i18n","key","orderableFieldName","payload","query","renderRowTypes","req","tableAppearance","useAsTitle","viewType","columnState","clientFields","serverFields","isPolymorphic","isGroupingBy","Boolean","groupBy","collection","find","each","slug","some","push","serverCollectionConfig","config","sharedArgs","collectionSlug","undefined","dataType","docs","columnsToUse","unshift","accessor","active","disabled","hidden","Heading","t","renderedCells","map","doc","i","_jsx","size","relationTo","labels","singular","_","rowData","className","filter","join","_jsxs","totalDocs","appearance"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 2220, "column": 0}, "map": {"version":3,"sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/dist/elements/Banner/index.js/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Banner = registerClientReference(\n    function() { throw new Error(\"Attempted to call Banner() from the server but Banner is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/cms/node_modules/@payloadcms/ui/dist/elements/Banner/index.js <module evaluation>\",\n    \"Banner\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,SAAS,IAAA,+QAAuB,EACzC;IAAa,MAAM,IAAI,MAAM;AAA4N,GACzP,+FACA","ignoreList":[0]}},
    {"offset": {"line": 2234, "column": 0}, "map": {"version":3,"sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/dist/elements/Banner/index.js/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Banner = registerClientReference(\n    function() { throw new Error(\"Attempted to call Banner() from the server but Banner is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/cms/node_modules/@payloadcms/ui/dist/elements/Banner/index.js\",\n    \"Banner\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,SAAS,IAAA,+QAAuB,EACzC;IAAa,MAAM,IAAI,MAAM;AAA4N,GACzP,2EACA","ignoreList":[0]}},
    {"offset": {"line": 2248, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/elements/Banner/index.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/elements/Banner/index.tsx"],"sourcesContent":["'use client'\nimport type { MouseEvent } from 'react'\n\nimport React from 'react'\n\nimport './index.scss'\nimport { Link } from '../Link/index.js'\n\nconst baseClass = 'banner'\n\ntype onClick = (event: MouseEvent) => void\n\nexport type Props = Readonly<{\n  alignIcon?: 'left' | 'right'\n  children?: React.ReactNode\n  className?: string\n  icon?: React.ReactNode\n  onClick?: onClick\n  to?: string\n  type?: 'default' | 'error' | 'info' | 'success'\n}>\n\nexport type RenderedTypeProps = {\n  children?: React.ReactNode\n  className?: string\n  onClick?: onClick\n  to: string\n}\n\nexport const Banner: React.FC<Props> = ({\n  type = 'default',\n  alignIcon = 'right',\n  children,\n  className,\n  icon,\n  onClick,\n  to,\n}) => {\n  const classes = [\n    baseClass,\n    `${baseClass}--type-${type}`,\n    className && className,\n    to && `${baseClass}--has-link`,\n    (to || onClick) && `${baseClass}--has-action`,\n    icon && `${baseClass}--has-icon`,\n    icon && `${baseClass}--align-icon-${alignIcon}`,\n  ]\n    .filter(Boolean)\n    .join(' ')\n\n  let RenderedType: React.ComponentType<RenderedTypeProps> | React.ElementType = 'div'\n\n  if (onClick && !to) {\n    RenderedType = 'button'\n  }\n  if (to) {\n    RenderedType = Link\n  }\n\n  return (\n    <RenderedType className={classes} href={to || null} onClick={onClick}>\n      {icon && alignIcon === 'left' && <React.Fragment>{icon}</React.Fragment>}\n      <span className={`${baseClass}__content`}>{children}</span>\n      {icon && alignIcon === 'right' && <React.Fragment>{icon}</React.Fragment>}\n    </RenderedType>\n  )\n}\n"],"names":["React","Link","baseClass","Banner","type","alignIcon","children","className","icon","onClick","to","classes","filter","Boolean","join","RenderedType","_jsxs","href","_jsx","Fragment"],"mappings":"","ignoreList":[]}},
    {"offset": {"line": 2256, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/elements/FieldDiffLabel/index.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/elements/FieldDiffLabel/index.tsx"],"sourcesContent":["import React from 'react'\n\nimport './index.scss'\n\nconst baseClass = 'field-diff-label'\n\nexport const FieldDiffLabel: React.FC<{ children?: React.ReactNode }> = ({ children }) => (\n  <div className={baseClass}>{children}</div>\n)\n"],"names":["React","baseClass","FieldDiffLabel","children","_jsx","className"],"mappings":";;;;;AAAA,OAAOA,KAAA,MAAW;;;;AAIlB,MAAMC,SAAA,GAAY;AAEX,MAAMC,cAAA,GAA2DA,CAAC,EAAEC,QAAAA,EAAU,GAAA,WAAA,OACnFC,qOAAA,EAAC,OAAA;QAAIC,SAAA,EAAWJ,SAAA;kBAAYE","ignoreList":[]}},
    {"offset": {"line": 2274, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/elements/FieldDiffContainer/index.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/elements/FieldDiffContainer/index.tsx"],"sourcesContent":["import type { LabelFunction, StaticLabel } from 'payload'\n\nimport './index.scss'\n\nimport { getTranslation, type I18nClient } from '@payloadcms/translations'\n\nimport { FieldDiffLabel } from '../FieldDiffLabel/index.js'\n\nconst baseClass = 'field-diff'\n\nexport const FieldDiffContainer: React.FC<{\n  className?: string\n  From: React.ReactNode\n  i18n: I18nClient\n  label: {\n    label?: false | LabelFunction | StaticLabel\n    locale?: string\n  }\n  nestingLevel?: number\n  To: React.ReactNode\n}> = (args) => {\n  const {\n    className,\n    From,\n    i18n,\n    label: { label, locale },\n    nestingLevel = 0,\n    To,\n  } = args\n\n  return (\n    <div\n      className={`${baseClass}-container${className ? ` ${className}` : ''} nested-level-${nestingLevel}`}\n      style={\n        nestingLevel\n          ? ({\n              // Need to use % instead of fr, as calc() doesn't work with fr when this is used in gridTemplateColumns\n              '--left-offset': `calc(50%  - (${nestingLevel} * calc( calc(var(--base)* 0.5) - 2.5px  )))`,\n            } as React.CSSProperties)\n          : ({\n              '--left-offset': '50%',\n            } as React.CSSProperties)\n      }\n    >\n      <FieldDiffLabel>\n        {locale && <span className={`${baseClass}__locale-label`}>{locale}</span>}\n        {typeof label !== 'function' && getTranslation(label || '', i18n)}\n      </FieldDiffLabel>\n      <div\n        className={`${baseClass}-content`}\n        style={\n          nestingLevel\n            ? {\n                gridTemplateColumns: `calc(var(--left-offset) - calc(var(--base)*0.5) )     calc(50% - calc(var(--base)*0.5) + calc(50% - var(--left-offset)))`,\n              }\n            : undefined\n        }\n      >\n        {From}\n        {To}\n      </div>\n    </div>\n  )\n}\n"],"names":["getTranslation","FieldDiffLabel","baseClass","FieldDiffContainer","args","className","From","i18n","label","locale","nestingLevel","To","_jsxs","style","_jsx","gridTemplateColumns","undefined"],"mappings":";;;;;AAIA,SAASA,cAAc,QAAyB;AAEhD,SAASC,cAAc,QAAQ;;;;;AAE/B,MAAMC,SAAA,GAAY;AAEX,MAAMC,kBAAA,IAUPC,IAAA;IACJ,MAAM,EACJC,SAAS,EACTC,IAAI,EACJC,IAAI,EACJC,KAAA,EAAO,EAAEA,KAAK,EAAEC,MAAAA,EAAQ,EACxBC,YAAA,GAAe,CAAC,EAChBC,EAAAA,EACD,GAAGP,IAAA;IAEJ,OAAA,WAAA,OACEQ,sOAAA,EAAC,OAAA;QACCP,SAAA,EAAW,GAAGH,SAAA,CAAA,UAAA,EAAsBG,SAAA,GAAY,CAAA,CAAA,EAAIA,SAAA,EAAW,GAAG,GAAA,cAAA,EAAmBK,YAAA,EAAc;QACnGG,KAAA,EACEH,YAAA,GACK;YACC,uGAAA;YACA,iBAAiB,CAAA,aAAA,EAAgBA,YAAA,CAAA,4CAAA,CAAA;QACnC,IACC;YACC,iBAAiB;QACnB;;8BAGNE,sOAAA,EAACX,0MAAA,EAAA;;oBACEQ,MAAA,IAAA,WAAA,OAAUK,qOAAA,EAAC,QAAA;wBAAKT,SAAA,EAAW,GAAGH,SAAA,CAAA,cAAA,CAAyB;kCAAGO;;oBAC1D,OAAOD,KAAA,KAAU,kBAAcR,4MAAA,EAAeQ,KAAA,IAAS,IAAID,IAAA;iBAAA;;8BAE9DK,sOAAA,EAAC,OAAA;gBACCP,SAAA,EAAW,GAAGH,SAAA,CAAA,QAAA,CAAmB;gBACjCW,KAAA,EACEH,YAAA,GACI;oBACEK,mBAAA,EAAqB,CAAA,wHAAA,CAAA;gBACvB,IACAC,SAAA;;oBAGLV,IAAA;oBACAK,EAAA;iBAAA;;;;AAIT","ignoreList":[]}},
    {"offset": {"line": 2323, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/elements/HTMLDiff/diff/index.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/elements/HTMLDiff/diff/index.ts"],"sourcesContent":["// Taken and modified from https://github.com/Arman19941113/html-diff/blob/master/packages/html-diff/src/index.ts\n\ninterface MatchedBlock {\n  newEnd: number\n  newStart: number\n  oldEnd: number\n  oldStart: number\n  size: number\n}\n\ninterface Operation {\n  /**\n   * Index of entry in tokenized token list\n   */\n  newEnd: number\n  newStart: number\n  oldEnd: number\n  oldStart: number\n  type: 'create' | 'delete' | 'equal' | 'replace'\n}\n\ntype BaseOpType = 'create' | 'delete'\n\ninterface HtmlDiffConfig {\n  classNames: {\n    createBlock: string\n    createInline: string\n    deleteBlock: string\n    deleteInline: string\n  }\n  greedyBoundary: number\n  greedyMatch: boolean\n  minMatchedSize: number\n}\n\nexport interface HtmlDiffOptions {\n  /**\n   * The classNames for wrapper DOM.\n   * Use this to configure your own styles without importing the built-in CSS file\n   */\n  classNames?: Partial<{\n    createBlock?: string\n    createInline?: string\n    deleteBlock?: string\n    deleteInline?: string\n  }>\n  /**\n   * @defaultValue 1000\n   */\n  greedyBoundary?: number\n  /**\n   * When greedyMatch is enabled, if the length of the sub-tokens exceeds greedyBoundary,\n   * we will use the matched sub-tokens that are sufficiently good, even if they are not optimal, to enhance performance.\n   * @defaultValue true\n   */\n  greedyMatch?: boolean\n  /**\n   * Determine the minimum threshold for calculating common sub-tokens.\n   * You may adjust it to a value larger than 2, but not lower, due to the potential inclusion of HTML tags in the count.\n   * @defaultValue 2\n   */\n  minMatchedSize?: number\n  /**\n   * Whether to tokenize by character or by word.\n   * @defaultValue false\n   */\n  tokenizeByCharacter?: boolean\n}\n\n// eslint-disable-next-line regexp/no-super-linear-backtracking, regexp/optimal-quantifier-concatenation\nconst htmlStartTagReg = /^<(?<name>[^\\s/>]+)[^>]*>$/\n// eslint-disable-next-line regexp/no-super-linear-backtracking, regexp/optimal-quantifier-concatenation\nconst htmlTagWithNameReg = /^<(?<isEnd>\\/)?(?<name>[^\\s>]+)[^>]*>$/\n\nconst htmlTagReg = /^<[^>]+>/\nconst htmlImgTagReg = /^<img[^>]*>$/\nconst htmlVideoTagReg = /^<video[^>]*>.*?<\\/video>$/ms\n\nexport class HtmlDiff {\n  private readonly config: HtmlDiffConfig\n  private leastCommonLength: number = Infinity\n  private readonly matchedBlockList: MatchedBlock[] = []\n  private readonly newTokens: string[] = []\n  private readonly oldTokens: string[] = []\n  private readonly operationList: Operation[] = []\n  private sideBySideContents?: [string, string]\n  private unifiedContent?: string\n\n  constructor(\n    oldHtml: string,\n    newHtml: string,\n    {\n      classNames = {\n        createBlock: 'html-diff-create-block-wrapper',\n        createInline: 'html-diff-create-inline-wrapper',\n        deleteBlock: 'html-diff-delete-block-wrapper',\n        deleteInline: 'html-diff-delete-inline-wrapper',\n      },\n      greedyBoundary = 1000,\n      greedyMatch = true,\n      minMatchedSize = 2,\n      tokenizeByCharacter = false,\n    }: HtmlDiffOptions = {},\n  ) {\n    // init config\n    this.config = {\n      classNames: {\n        createBlock: 'html-diff-create-block-wrapper',\n        createInline: 'html-diff-create-inline-wrapper',\n        deleteBlock: 'html-diff-delete-block-wrapper',\n        deleteInline: 'html-diff-delete-inline-wrapper',\n        ...classNames,\n      },\n      greedyBoundary,\n      greedyMatch,\n      minMatchedSize,\n    }\n    // white space is junk\n    oldHtml = oldHtml.trim()\n    newHtml = newHtml.trim()\n\n    // no need to diff\n    if (oldHtml === newHtml) {\n      this.unifiedContent = oldHtml\n      let equalSequence = 0\n      // eslint-disable-next-line regexp/no-super-linear-backtracking, regexp/optimal-quantifier-concatenation\n      const content = oldHtml.replace(/<([^\\s/>]+)[^>]*>/g, (match: string, name: string) => {\n        const tagNameLength = name.length + 1\n        return `${match.slice(0, tagNameLength)} data-seq=\"${++equalSequence}\"${match.slice(tagNameLength)}`\n      })\n      this.sideBySideContents = [content, content]\n      return\n    }\n\n    // step1: split HTML to tokens(atomic tokens)\n    const tokenizeFn = tokenizeByCharacter ? this.tokenizeByCharacter : this.tokenizeByWord\n    this.oldTokens = tokenizeFn(oldHtml)\n    this.newTokens = tokenizeFn(newHtml)\n    // step2: find matched blocks\n    this.matchedBlockList = this.getMatchedBlockList()\n\n    // step3: generate operation list\n    this.operationList = this.getOperationList()\n  }\n\n  // Find the longest matched block between tokens\n  private computeBestMatchedBlock(\n    oldStart: number,\n    oldEnd: number,\n    newStart: number,\n    newEnd: number,\n  ): MatchedBlock | null {\n    let bestMatchedBlock = null\n    for (let i = oldStart; i < oldEnd; i++) {\n      const len = Math.min(oldEnd - i, newEnd - newStart)\n      const ret = this.slideBestMatchedBlock(i, newStart, len)\n      if (ret && (!bestMatchedBlock || ret.size > bestMatchedBlock.size)) {\n        bestMatchedBlock = ret\n        if (ret.size > this.leastCommonLength) {\n          return bestMatchedBlock\n        }\n      }\n    }\n    for (let j = newStart; j < newEnd; j++) {\n      const len = Math.min(oldEnd - oldStart, newEnd - j)\n      const ret = this.slideBestMatchedBlock(oldStart, j, len)\n      if (ret && (!bestMatchedBlock || ret.size > bestMatchedBlock.size)) {\n        bestMatchedBlock = ret\n        if (ret.size > this.leastCommonLength) {\n          return bestMatchedBlock\n        }\n      }\n    }\n    return bestMatchedBlock\n  }\n\n  private computeMatchedBlockList(\n    oldStart: number,\n    oldEnd: number,\n    newStart: number,\n    newEnd: number,\n    matchedBlockList: MatchedBlock[] = [],\n  ): MatchedBlock[] {\n    const matchBlock = this.computeBestMatchedBlock(oldStart, oldEnd, newStart, newEnd)\n\n    if (!matchBlock) {\n      return []\n    }\n\n    if (oldStart < matchBlock.oldStart && newStart < matchBlock.newStart) {\n      this.computeMatchedBlockList(\n        oldStart,\n        matchBlock.oldStart,\n        newStart,\n        matchBlock.newStart,\n        matchedBlockList,\n      )\n    }\n    matchedBlockList.push(matchBlock)\n    if (oldEnd > matchBlock.oldEnd && newEnd > matchBlock.newEnd) {\n      this.computeMatchedBlockList(\n        matchBlock.oldEnd,\n        oldEnd,\n        matchBlock.newEnd,\n        newEnd,\n        matchedBlockList,\n      )\n    }\n    return matchedBlockList\n  }\n\n  private dressUpBlockTag(type: BaseOpType, token: string): string {\n    if (type === 'create') {\n      return `<div class=\"${this.config.classNames.createBlock}\">${token}</div>`\n    }\n    if (type === 'delete') {\n      return `<div class=\"${this.config.classNames.deleteBlock}\">${token}</div>`\n    }\n    return ''\n  }\n\n  private dressUpDiffContent(type: BaseOpType, tokens: string[]): string {\n    const tokensLength = tokens.length\n    if (!tokensLength) {\n      return ''\n    }\n\n    let result = ''\n    let textStartIndex = 0\n    let i = -1\n    for (const token of tokens) {\n      i++\n\n      // If this is true, this HTML should be diffed as well - not just its children\n      const isMatchElement = token.includes('data-enable-match=\"true\"')\n      const isMatchExplicitlyDisabled = token.includes('data-enable-match=\"false\"')\n      const isHtmlTag = !!token.match(htmlTagReg)?.length\n\n      if (isMatchExplicitlyDisabled) {\n        textStartIndex = i + 1\n        result += token\n      }\n      // this token is html tag\n      else if (!isMatchElement && isHtmlTag) {\n        // handle text tokens before\n        if (i > textStartIndex) {\n          result += this.dressUpText(type, tokens.slice(textStartIndex, i))\n        }\n        // handle this tag\n        textStartIndex = i + 1\n        if (token.match(htmlVideoTagReg)) {\n          result += this.dressUpBlockTag(type, token)\n        } /* else if ([htmlImgTagReg].some((item) => token.match(item))) {\n          result += this.dressUpInlineTag(type, token)\n        }*/ else {\n          result += token\n        }\n      } else if (isMatchElement && isHtmlTag) {\n        // handle text tokens before\n        if (i > textStartIndex) {\n          result += this.dressUpText(type, tokens.slice(textStartIndex, i))\n        }\n\n        // handle this tag\n        textStartIndex = i + 1\n        // Add data-match-type to the tag that can be styled\n        const newToken = this.dressupMatchEnabledHtmlTag(type, token)\n\n        result += newToken\n      }\n    }\n    if (textStartIndex < tokensLength) {\n      result += this.dressUpText(type, tokens.slice(textStartIndex))\n    }\n    return result\n  }\n\n  private dressUpInlineTag(type: BaseOpType, token: string): string {\n    if (type === 'create') {\n      return `<span class=\"${this.config.classNames.createInline}\">${token}</span>`\n    }\n    if (type === 'delete') {\n      return `<span class=\"${this.config.classNames.deleteInline}\">${token}</span>`\n    }\n    return ''\n  }\n\n  private dressupMatchEnabledHtmlTag(type: BaseOpType, token: string): string {\n    // token is a single html tag, e.g. <a data-enable-match=\"true\" href=\"https://2\" rel=undefined target=undefined>\n    // add data-match-type to the tag\n    const tagName = token.match(htmlStartTagReg)?.groups?.name\n    if (!tagName) {\n      return token\n    }\n    const tagNameLength = tagName.length + 1\n    const matchType = type === 'create' ? 'create' : 'delete'\n    return `${token.slice(0, tagNameLength)} data-match-type=\"${matchType}\"${token.slice(\n      tagNameLength,\n      token.length,\n    )}`\n  }\n\n  private dressUpText(type: BaseOpType, tokens: string[]): string {\n    const text = tokens.join('')\n    if (!text.trim()) {\n      return ''\n    }\n    if (type === 'create') {\n      return `<span data-match-type=\"create\">${text}</span>`\n    }\n    if (type === 'delete') {\n      return `<span data-match-type=\"delete\">${text}</span>`\n    }\n    return ''\n  }\n\n  /**\n   * Generates a list of token entries that are matched between the old and new HTML. This list will not\n   * include token ranges that differ.\n   */\n  private getMatchedBlockList(): MatchedBlock[] {\n    const n1 = this.oldTokens.length\n    const n2 = this.newTokens.length\n\n    // 1. sync from start\n    let start: MatchedBlock | null = null\n    let i = 0\n    while (i < n1 && i < n2 && this.oldTokens[i] === this.newTokens[i]) {\n      i++\n    }\n    if (i >= this.config.minMatchedSize) {\n      start = {\n        newEnd: i,\n        newStart: 0,\n        oldEnd: i,\n        oldStart: 0,\n        size: i,\n      }\n    }\n\n    // 2. sync from end\n    let end: MatchedBlock | null = null\n    let e1 = n1 - 1\n    let e2 = n2 - 1\n    while (i <= e1 && i <= e2 && this.oldTokens[e1] === this.newTokens[e2]) {\n      e1--\n      e2--\n    }\n    const size = n1 - 1 - e1\n    if (size >= this.config.minMatchedSize) {\n      end = {\n        newEnd: n2,\n        newStart: e2 + 1,\n        oldEnd: n1,\n        oldStart: e1 + 1,\n        size,\n      }\n    }\n\n    // 3. handle rest\n    const oldStart = start ? i : 0\n    const oldEnd = end ? e1 + 1 : n1\n    const newStart = start ? i : 0\n    const newEnd = end ? e2 + 1 : n2\n    // optimize for large tokens\n    if (this.config.greedyMatch) {\n      const commonLength = Math.min(oldEnd - oldStart, newEnd - newStart)\n      if (commonLength > this.config.greedyBoundary) {\n        this.leastCommonLength = Math.floor(commonLength / 3)\n      }\n    }\n    const ret = this.computeMatchedBlockList(oldStart, oldEnd, newStart, newEnd)\n    if (start) {\n      ret.unshift(start)\n    }\n    if (end) {\n      ret.push(end)\n    }\n\n    return ret\n  }\n\n  // Generate operation list by matchedBlockList\n  private getOperationList(): Operation[] {\n    const operationList: Operation[] = []\n    let walkIndexOld = 0\n    let walkIndexNew = 0\n    for (const matchedBlock of this.matchedBlockList) {\n      const isOldStartIndexMatched = walkIndexOld === matchedBlock.oldStart\n      const isNewStartIndexMatched = walkIndexNew === matchedBlock.newStart\n      const operationBase = {\n        newEnd: matchedBlock.newStart,\n        newStart: walkIndexNew,\n        oldEnd: matchedBlock.oldStart,\n        oldStart: walkIndexOld,\n      }\n      if (!isOldStartIndexMatched && !isNewStartIndexMatched) {\n        operationList.push(Object.assign(operationBase, { type: 'replace' as const }))\n      } else if (isOldStartIndexMatched && !isNewStartIndexMatched) {\n        operationList.push(Object.assign(operationBase, { type: 'create' as const }))\n      } else if (!isOldStartIndexMatched && isNewStartIndexMatched) {\n        operationList.push(Object.assign(operationBase, { type: 'delete' as const }))\n      }\n\n      operationList.push({\n        type: 'equal',\n        newEnd: matchedBlock.newEnd,\n        newStart: matchedBlock.newStart,\n        oldEnd: matchedBlock.oldEnd,\n        oldStart: matchedBlock.oldStart,\n      })\n      walkIndexOld = matchedBlock.oldEnd\n      walkIndexNew = matchedBlock.newEnd\n    }\n    // handle the tail content\n    const maxIndexOld = this.oldTokens.length\n    const maxIndexNew = this.newTokens.length\n    const tailOperationBase = {\n      newEnd: maxIndexNew,\n      newStart: walkIndexNew,\n      oldEnd: maxIndexOld,\n      oldStart: walkIndexOld,\n    }\n    const isOldFinished = walkIndexOld === maxIndexOld\n    const isNewFinished = walkIndexNew === maxIndexNew\n    if (!isOldFinished && !isNewFinished) {\n      operationList.push(Object.assign(tailOperationBase, { type: 'replace' as const }))\n    } else if (isOldFinished && !isNewFinished) {\n      operationList.push(Object.assign(tailOperationBase, { type: 'create' as const }))\n    } else if (!isOldFinished && isNewFinished) {\n      operationList.push(Object.assign(tailOperationBase, { type: 'delete' as const }))\n    }\n    return operationList\n  }\n\n  private slideBestMatchedBlock(addA: number, addB: number, len: number): MatchedBlock | null {\n    let maxSize = 0\n    let bestMatchedBlock: MatchedBlock | null = null\n\n    let continuousSize = 0\n    for (let i = 0; i < len; i++) {\n      if (this.oldTokens[addA + i] === this.newTokens[addB + i]) {\n        continuousSize++\n      } else {\n        continuousSize = 0\n      }\n      if (continuousSize > maxSize) {\n        maxSize = continuousSize\n        bestMatchedBlock = {\n          newEnd: addB + i + 1,\n          newStart: addB + i - continuousSize + 1,\n          oldEnd: addA + i + 1,\n          oldStart: addA + i - continuousSize + 1,\n          size: continuousSize,\n        }\n      }\n    }\n\n    return maxSize >= this.config.minMatchedSize ? bestMatchedBlock : null\n  }\n\n  /**\n   * Convert HTML to tokens at character level, preserving HTML tags as complete tokens\n   * @example\n   * tokenize(\"<a> Hello World </a>\")\n   * [\"<a>\", \" \", \"H\", \"e\", \"l\", \"l\", \"o\", \" \", \"W\", \"o\", \"r\", \"l\", \"d\", \" \", \"</a>\"]\n   */\n  private tokenizeByCharacter(html: string): string[] {\n    // First, identify HTML tags and preserve them as complete tokens\n    const tokens: string[] = []\n    let currentPos = 0\n\n    // Regular expression to match HTML tags (including picture and video tags with content)\n    const tagRegex = /<picture[^>]*>.*?<\\/picture>|<video[^>]*>.*?<\\/video>|<[^>]+>/gs\n    let match: null | RegExpExecArray\n\n    while ((match = tagRegex.exec(html)) !== null) {\n      // Add characters before the tag\n      const beforeTag = html.substring(currentPos, match.index)\n      if (beforeTag) {\n        // Split non-tag content into individual characters\n        for (const char of beforeTag) {\n          tokens.push(char)\n        }\n      }\n\n      // Add the complete tag as a single token\n      tokens.push(match[0])\n      currentPos = match.index + match[0].length\n    }\n\n    // Add any remaining characters after the last tag\n    const remaining = html.substring(currentPos)\n    for (const char of remaining) {\n      tokens.push(char)\n    }\n\n    return tokens\n  }\n\n  /**\n   * convert HTML to tokens\n   * @example\n   * tokenize(\"<a> Hello World </a>\")\n   * [\"<a>\",\" \", \"Hello\", \" \", \"World\", \" \", \"</a>\"]\n   */\n  private tokenizeByWord(html: string): string[] {\n    // atomic token: html tagcontinuous numbers or lettersblank spacesother symbol\n    return (\n      html.match(\n        /<picture[^>]*>.*?<\\/picture>|<video[^>]*>.*?<\\/video>|<[^>]+>|\\w+\\b|\\s+|[^<>\\w]/gs,\n      ) || []\n    )\n  }\n\n  public getSideBySideContents(): string[] {\n    if (this.sideBySideContents !== undefined) {\n      return this.sideBySideContents\n    }\n\n    let oldHtml = ''\n    let newHtml = ''\n    let equalSequence = 0\n    this.operationList.forEach((operation) => {\n      switch (operation.type) {\n        case 'create': {\n          newHtml += this.dressUpDiffContent(\n            'create',\n            this.newTokens.slice(operation.newStart, operation.newEnd),\n          )\n          break\n        }\n\n        case 'delete': {\n          const deletedTokens = this.oldTokens.slice(operation.oldStart, operation.oldEnd)\n          oldHtml += this.dressUpDiffContent('delete', deletedTokens)\n          break\n        }\n        case 'equal': {\n          const equalTokens = this.newTokens.slice(operation.newStart, operation.newEnd)\n          let equalString = ''\n          for (const token of equalTokens) {\n            // find start tags and add data-seq to enable sync scroll\n            const startTagMatch = token.match(htmlStartTagReg)\n            if (startTagMatch) {\n              equalSequence += 1\n              const tagNameLength = (startTagMatch?.groups?.name?.length ?? 0) + 1\n              equalString += `${token.slice(0, tagNameLength)} data-seq=\"${equalSequence}\"${token.slice(tagNameLength)}`\n            } else {\n              equalString += token\n            }\n          }\n          oldHtml += equalString\n          newHtml += equalString\n          break\n        }\n\n        case 'replace': {\n          oldHtml += this.dressUpDiffContent(\n            'delete',\n            this.oldTokens.slice(operation.oldStart, operation.oldEnd),\n          )\n          newHtml += this.dressUpDiffContent(\n            'create',\n            this.newTokens.slice(operation.newStart, operation.newEnd),\n          )\n          break\n        }\n\n        default: {\n          console.error('Richtext diff error - invalid operation: ' + String(operation.type))\n        }\n      }\n    })\n\n    const result: [string, string] = [oldHtml, newHtml]\n    this.sideBySideContents = result\n    return result\n  }\n\n  public getUnifiedContent(): string {\n    if (this.unifiedContent !== undefined) {\n      return this.unifiedContent\n    }\n\n    let result = ''\n    this.operationList.forEach((operation) => {\n      switch (operation.type) {\n        case 'create': {\n          result += this.dressUpDiffContent(\n            'create',\n            this.newTokens.slice(operation.newStart, operation.newEnd),\n          )\n          break\n        }\n\n        case 'delete': {\n          result += this.dressUpDiffContent(\n            'delete',\n            this.oldTokens.slice(operation.oldStart, operation.oldEnd),\n          )\n          break\n        }\n\n        case 'equal': {\n          for (const token of this.newTokens.slice(operation.newStart, operation.newEnd)) {\n            result += token\n          }\n          break\n        }\n\n        case 'replace': {\n          // handle specially tag replace\n          const olds = this.oldTokens.slice(operation.oldStart, operation.oldEnd)\n          const news = this.newTokens.slice(operation.newStart, operation.newEnd)\n          if (\n            olds.length === 1 &&\n            news.length === 1 &&\n            olds[0]?.match(htmlTagReg) &&\n            news[0]?.match(htmlTagReg)\n          ) {\n            result += news[0]\n            break\n          }\n\n          const deletedTokens: string[] = []\n          const createdTokens: string[] = []\n          let createIndex = operation.newStart\n          for (\n            let deleteIndex = operation.oldStart;\n            deleteIndex < operation.oldEnd;\n            deleteIndex++\n          ) {\n            const deletedToken = this.oldTokens[deleteIndex]\n\n            if (!deletedToken) {\n              continue\n            }\n\n            const matchTagResultD = deletedToken?.match(htmlTagWithNameReg)\n            if (matchTagResultD) {\n              // handle replaced tag token\n\n              // skip special tag\n              if ([htmlImgTagReg, htmlVideoTagReg].some((item) => deletedToken?.match(item))) {\n                deletedTokens.push(deletedToken)\n                continue\n              }\n\n              // handle normal tag\n              result += this.dressUpDiffContent('delete', deletedTokens)\n              deletedTokens.splice(0)\n              let isTagInNewFind = false\n              for (\n                let tempCreateIndex = createIndex;\n                tempCreateIndex < operation.newEnd;\n                tempCreateIndex++\n              ) {\n                const createdToken = this.newTokens[tempCreateIndex]\n                if (!createdToken) {\n                  continue\n                }\n                const matchTagResultC = createdToken?.match(htmlTagWithNameReg)\n                if (\n                  matchTagResultC &&\n                  matchTagResultC.groups?.name === matchTagResultD.groups?.name &&\n                  matchTagResultC.groups?.isEnd === matchTagResultD.groups?.isEnd\n                ) {\n                  // find first matched tag, but not maybe the expected tag(to optimize)\n                  isTagInNewFind = true\n                  result += this.dressUpDiffContent('create', createdTokens)\n                  result += createdToken\n                  createdTokens.splice(0)\n                  createIndex = tempCreateIndex + 1\n                  break\n                } else {\n                  createdTokens.push(createdToken)\n                }\n              }\n              if (!isTagInNewFind) {\n                result += deletedToken\n                createdTokens.splice(0)\n              }\n            } else {\n              // token is not a tag\n              deletedTokens.push(deletedToken)\n            }\n          }\n          if (createIndex < operation.newEnd) {\n            createdTokens.push(...this.newTokens.slice(createIndex, operation.newEnd))\n          }\n          result += this.dressUpDiffContent('delete', deletedTokens)\n          result += this.dressUpDiffContent('create', createdTokens)\n          break\n        }\n\n        default: {\n          console.error('Richtext diff error - invalid operation: ' + String(operation.type))\n        }\n      }\n    })\n    this.unifiedContent = result\n    return result\n  }\n}\n"],"names":["htmlStartTagReg","htmlTagWithNameReg","htmlTagReg","htmlImgTagReg","htmlVideoTagReg","HtmlDiff","config","leastCommonLength","Infinity","matchedBlockList","newTokens","oldTokens","operationList","sideBySideContents","unifiedContent","constructor","oldHtml","newHtml","classNames","createBlock","createInline","deleteBlock","deleteInline","greedyBoundary","greedyMatch","minMatchedSize","tokenizeByCharacter","trim","equalSequence","content","replace","match","name","tagNameLength","length","slice","tokenizeFn","tokenizeByWord","getMatchedBlockList","getOperationList","computeBestMatchedBlock","oldStart","oldEnd","newStart","newEnd","bestMatchedBlock","i","len","Math","min","ret","slideBestMatchedBlock","size","j","computeMatchedBlockList","matchBlock","push","dressUpBlockTag","type","token","dressUpDiffContent","tokens","tokensLength","result","textStartIndex","isMatchElement","includes","isMatchExplicitlyDisabled","isHtmlTag","dressUpText","newToken","dressupMatchEnabledHtmlTag","dressUpInlineTag","tagName","groups","matchType","text","join","n1","n2","start","end","e1","e2","commonLength","floor","unshift","walkIndexOld","walkIndexNew","matchedBlock","isOldStartIndexMatched","isNewStartIndexMatched","operationBase","Object","assign","maxIndexOld","maxIndexNew","tailOperationBase","isOldFinished","isNewFinished","addA","addB","maxSize","continuousSize","html","currentPos","tagRegex","exec","beforeTag","substring","index","char","remaining","getSideBySideContents","undefined","forEach","operation","deletedTokens","equalTokens","equalString","startTagMatch","console","error","String","getUnifiedContent","olds","news","createdTokens","createIndex","deleteIndex","deletedToken","matchTagResultD","some","item","splice","isTagInNewFind","tempCreateIndex","createdToken","matchTagResultC","isEnd"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 2866, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/elements/HTMLDiff/index.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/elements/HTMLDiff/index.tsx"],"sourcesContent":["import React from 'react'\n\nimport { HtmlDiff } from './diff/index.js'\nimport './index.scss'\n\nconst baseClass = 'html-diff'\n\nexport const getHTMLDiffComponents = ({\n  fromHTML,\n  toHTML,\n  tokenizeByCharacter,\n}: {\n  fromHTML: string\n  toHTML: string\n  tokenizeByCharacter?: boolean\n}): {\n  From: React.ReactNode\n  To: React.ReactNode\n} => {\n  const diffHTML = new HtmlDiff(fromHTML, toHTML, {\n    tokenizeByCharacter,\n  })\n\n  const [oldHTML, newHTML] = diffHTML.getSideBySideContents()\n\n  const From = oldHTML ? (\n    <div\n      className={`${baseClass}__diff-old html-diff`}\n      dangerouslySetInnerHTML={{ __html: oldHTML }}\n    />\n  ) : null\n\n  const To = newHTML ? (\n    <div\n      className={`${baseClass}__diff-new html-diff`}\n      dangerouslySetInnerHTML={{ __html: newHTML }}\n    />\n  ) : null\n\n  return { From, To }\n}\n"],"names":["React","HtmlDiff","baseClass","getHTMLDiffComponents","fromHTML","toHTML","tokenizeByCharacter","diffHTML","oldHTML","newHTML","getSideBySideContents","From","_jsx","className","dangerouslySetInnerHTML","__html","To"],"mappings":";;;;;AAAA,OAAOA,KAAA,MAAW;AAElB,SAASC,QAAQ,QAAQ;;;;;AAGzB,MAAMC,SAAA,GAAY;AAEX,MAAMC,qBAAA,GAAwBA,CAAC,EACpCC,QAAQ,EACRC,MAAM,EACNC,mBAAAA,EAKD;IAIC,MAAMC,QAAA,GAAW,IAAIN,sMAAA,CAASG,QAAA,EAAUC,MAAA,EAAQ;QAC9CC;IACF;IAEA,MAAM,CAACE,OAAA,EAASC,OAAA,CAAQ,GAAGF,QAAA,CAASG,qBAAqB;IAEzD,MAAMC,IAAA,GAAOH,OAAA,GAAA,WAAA,OACXI,qOAAA,EAAC,OAAA;QACCC,SAAA,EAAW,GAAGX,SAAA,CAAA,oBAAA,CAA+B;QAC7CY,uBAAA,EAAyB;YAAEC,MAAA,EAAQP;QAAQ;SAE3C;IAEJ,MAAMQ,EAAA,GAAKP,OAAA,GAAA,WAAA,OACTG,qOAAA,EAAC,OAAA;QACCC,SAAA,EAAW,GAAGX,SAAA,CAAA,oBAAA,CAA+B;QAC7CY,uBAAA,EAAyB;YAAEC,MAAA,EAAQN;QAAQ;SAE3C;IAEJ,OAAO;QAAEE,IAAA;QAAMK;IAAG;AACpB","ignoreList":[]}},
    {"offset": {"line": 2904, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/cms/node_modules/@payloadcms/ui/dist/graphics/File/index.js","sources":["file:///Users/jameshuang/The-Truth-Interactive/cms/node_modules/%40payloadcms/ui/src/graphics/File/index.tsx"],"sourcesContent":["import React from 'react'\n\nexport const File: React.FC = () => (\n  <svg\n    height=\"150\"\n    style={{ backgroundColor: '#333333' }}\n    viewBox=\"0 0 150 150\"\n    width=\"150\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path d=\"M82.8876 50.5H55.5555V100.5H94.4444V61.9818H82.8876V50.5Z\" fill=\"white\" />\n    <path d=\"M82.8876 61.9818H94.4444L82.8876 50.5V61.9818Z\" fill=\"#9A9A9A\" />\n  </svg>\n)\n"],"names":["React","File","_jsxs","height","style","backgroundColor","viewBox","width","xmlns","_jsx","d","fill"],"mappings":";;;;;AAAA,OAAOA,KAAA,MAAW;;;AAEX,MAAMC,IAAA,GAAiBA,CAAA,GAAA,WAAA,OAC5BC,sOAAA,EAAC,OAAA;QACCC,MAAA,EAAO;QACPC,KAAA,EAAO;YAAEC,eAAA,EAAiB;QAAU;QACpCC,OAAA,EAAQ;QACRC,KAAA,EAAM;QACNC,KAAA,EAAM;;8BAENC,qOAAA,EAAC,QAAA;gBAAKC,CAAA,EAAE;gBAA4DC,IAAA,EAAK;;8BACzEF,qOAAA,EAAC,QAAA;gBAAKC,CAAA,EAAE;gBAAiDC,IAAA,EAAK","ignoreList":[]}}]
}